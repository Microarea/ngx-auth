{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@tb/auth/lib/models/subscription.model.ts","ng://@tb/auth/lib/models/login-request.ts","ng://@tb/auth/lib/models/logoff-request.ts","ng://@tb/auth/lib/models/storage-vars.ts","ng://@tb/auth/lib/models/is-valid-token-request.ts","ng://@tb/auth/lib/models/operation-result.ts","ng://@tb/auth/lib/pages/change-password-dialog/change-password-dialog.component.html","ng://@tb/auth/lib/pages/change-password-dialog/change-password-dialog.component.ts","ng://@tb/auth/lib/pages/alert-dialog/alert-dialog.component.html","ng://@tb/auth/lib/pages/alert-dialog/alert-dialog.component.ts","ng://@tb/auth/lib/pages/otp-dialog/otp.component.html","ng://@tb/auth/lib/pages/otp-dialog/otp.component.ts","ng://@tb/auth/lib/auth.service.ts","ng://@tb/auth/lib/auth.guard.ts","ng://@tb/auth/lib/auth.interceptor.ts","ng://@tb/auth/lib/pages/forgot-password-dialog/forgot-password.component.ts","ng://@tb/auth/lib/pages/forgot-password-dialog/forgot-password.component.html","ng://@tb/auth/lib/pages/login.component.html","ng://@tb/auth/lib/pages/login.component.ts","ng://@tb/auth/lib/logoff.component.ts","ng://@tb/auth/lib/app-material.module.ts","ng://@tb/auth/lib/auth.module.ts"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","EntityStatus","token","appId","accountName","password","AccountName","Password","NewPassword","IgnoreOldPassword","JWTToken","Code","StorageVars","JWT","CULTURE","UI_CULTURE","ACCOUNT_NAME","ACCOUNT_ROLES","SUBSCRIPTION","SUBSCRIPTION_DESCRIPTION","USER_GATEWAY_AUTOREDIRECT","INSTANCEKEY","DONTSHOWUPDATEWARN","Result","Message","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate1","ChangePasswordDialogComponent","mdDialogRef","data","error","title","Title","message","placeHolder","PlaceHolder","placeHolder2","PlaceHolder2","newpwd","newpwd2","prototype","ngOnInit","cancel","undefined","close","confirm","NewPwd","core","ɵɵdirectiveInject","dialog","MatDialogRef","MAT_DIALOG_DATA","selectors","decls","vars","consts","template","rf","ctx","i0.ɵɵlistener","i0.ɵɵtemplate","i0.ɵɵtextInterpolate","i0.ɵɵproperty","i0.ɵɵpropertyInterpolate","AlertDialogComponent","dontshow","subkey","imagePath","imageAlt","dontshowanymore","DontShow","SubKey","ImagePath","ImageAlt","showOptions","event","localStorage","setItem","removeItem","closeDialog","$event","authServiceInstance","OtpComponent","resendRequested","EventEmitter","accname","inputValue","TextValue","navigator","language","buttonCancel","resendOTPpLabel","resendOTPpLabelDone","alternativelbl","alternative","resendOTP","emit","setTimeout","_this","TbAuthService","env","http","injector","loggedOut$","Subject","errorMessage","okMessage","callLoginAfterOTPRequest","reLoginAfterOTP","getBaseUrl","auth","url","getSnapshotServiceUrl","snapshotServiceUrl","getLoginPageUrl","loginPageUrl","getAuthServiceUrl","getIupUrl","iupurl","getRedirectUrl","redirectUrl","getUserGatewayUrl","userGatewayUrl","getCreateAccountUrl","createAccountUrl","getChangePasswordUrl","changePasswordUrl","hasSubscriptionSelection","subscriptionSelection","showSignUp","getAppId","getPreLoginAppId","preLoginAppId","isSessionStorage","sessionStorage","getLogoURL","logoURL","isRedirectExternal","getUpdateMessageIt","updatemessageIt","getUpdateMessageEn","updatemessageEn","_.defaultsDeep","DEFAULT_ENV","console","log","Object","defineProperty","get","Router","checkConnection","pipe","timeout","map","__","toPromise","catch","err","_a","getAuthorizationHeader","JSON","stringify","type","securityValue","getToken","prelogin","loginRequest","post","getPreLoginUrl","loginResponse","ResultCode","openChangePasswordDialog","getLockedUserMessage","openOTPDialog","login","redologin","loginresponse","getLoginUrl","getName","storageData","logoff","clearStorage","JwtToken","get2FARequiredMessage","subscriptionKey","messageFromLogin","seconds","msg","isNaN","minVal","Math","round","description","openUpdateAlertDialog","info","open","afterClosed","subscribe","getRedirectUrlForSubscription","router","navigate","getSymbolsToPromise","opRes","pswRulesSymbol","Content","alert","cpi","ChangePasswordInfo","changePassword","headers","HttpHeaders","Content-Type","getSymbolsUrl","mes","tit","dialogRef","componentInstance","isValidToken","authtoken","getIsValidTokenUrl","IsValidTokenRequest","tap","jObj","catchError","status","res","OperationResult","routerState","snapshot","includes","of","opres","getCompaniesForUser","user","getSubsKeysForAccountUrl","subscriptions","getLogoutUrl","getChangePasswordApiUrl","resendOTPUrl","getResetPasswordUrl","bodyString","resetpassword","logoffRequest","LogoffRequest","logoffResponse","navigateUserGateway","document","location","href","getInstancesMapForUser","currentInstanceKey","filter","k","SubscriptionKey","j","InstanceKey","getSnapshot","i","ServiceType","Url","baseRedirectUrl","getInstancesMapForAccountUrl","getCalendar","getCalendarUrl","instanceKey","getUpdateMessage","storageSubscriptionData","subscriptionDescription","storageQueryParams","setInstanceKey","AskingProcess","respCulture","RegionalSettings","window","respUiCulture","Language","Roles","SubscriptionDesc","saveCulture","culture","uiCulture","getItem","getAccountName","getSubscription","getSubscriptionDescription","getCulture","getUICulture","getInstanceKey","ɵɵinject","HttpClient","Injector","MatDialog","factory","ɵfac","providedIn","TbAuthGuard","authService","canActivate","state","jwt","queryParams","hasOwnProperty","subKey","ns","args","LoginRequest","replaceUrl","queryParamsHandling","TbAuthInterceptor","intercept","request","clone","setHeaders","Authorization","handle","ForgotPasswordComponent","i0.ɵɵtextInterpolate2","ɵɵrestoreView","_r15","ɵɵnextContext","keyUpFunction","_r24","ctx_r3","hide","_r29","onSubChange","isDropDownClicked","ctx_r4","loginSubscriptions","TbLoginComponent","renderer","doc","cachedCompanies","capsLockOn","validate","loading","isConnected","dropDownIsClicked","comboBoxIsClicked","iconIsClicked","FormatDateString","date","tempDate","convertUTCDateToLocalDate","getDate","getMonth","getFullYear","FormatStartDateString","NumberPad","getHours","FormatEndDateString","h","padding","Array","join","slice","listen","dropdown","toggle","instancekey","buttonText","currentYear","Date","toString","chooseSubscription","goodJob","subscription","instance","buttonBack","welcome","enterCredentials","forgetPassword","blocMaiusc","idleTimeoutMessage","upgradeWarningTitle","ngAfterContentInit","loadLoginData","querySelectorAll","forEach","el","parentElement","className","_b","newValue","sd","find","s","subscriptionkey","key","disabledButton","capsOn","getModifierState","hasAutofill","newUser","back","saveLoginData","err1","result1","UpdateScheduled","content","scheduledUpdate","scheduledtime","val","replace","diffInDays","DateTime","fromISO","diff","local","toObject","days","dt","UTC","getMinutes","getSeconds","getMilliseconds","requestAndSortSubscriptions","temp","indexOf","sort","compareCompanies","c","a","b","nameA","toLowerCase","nameB","goToForgotPassword","forgotpassword","Renderer2","DOCUMENT","viewQuery","querySelector","TbLogoffComponent","LogOff","encapsulation","AppMaterialModule","imports","MatDialogModule","MatFormFieldModule","MatInputModule","MatCheckboxModule","exports","routes","path","component","pathMatch","TbAuthModule","forRoot","ngModule","providers","CommonModule","FormsModule","InputsModule","ButtonsModule","DropDownsModule","RouterModule","TbIconsModule","declarations"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export interface Subscription {\r\n    subscriptionkey: string;\r\n    description: string;\r\n    status: number;\r\n    instancekey: string;\r\n}\r\n// enum as [Flags] to set multiple status in MP_Subscriptions and MP_Instances\r\n// --------------------------------------------------------------------------------------------------------\r\nexport enum EntityStatus {\r\n   None = 0,\r\n  // tslint:disable-next-line: no-bitwise\r\n  DBUnderMaintenance = 1 << 0, // 1\r\n  // tslint:disable-next-line: no-bitwise\r\n  Disabled = 1 << 1, // 2\r\n  // tslint:disable-next-line: no-bitwise\r\n  PrivacyMode = 1 << 2, // 4\r\n// tslint:disable-next-line: no-bitwise\r\n  Canary = 1 << 3, // 8\r\n  // tslint:disable-next-line: no-bitwise\r\n  UpdateScheduled = 1 << 4 // 16\r\n}\r\n//[Flag] public enum EntityStatus //in provmodel\r\n//\tNone = 0,\r\n//\tDBUnderMaintenance = 1,\t// per propagare il valore di UnderMaintenance della SubDb sulla Subscription (quando operiamo dallo Store)\r\n//\tDisabled = 2,\r\n//\tPrivacyMode = 4,        // gestione NickName obbligatorio\r\n//\tCanary = 8,             //canary update in corso\r\n//\tUpdateScheduled = 32    //nel calendario è presente una data per questa sub\r\n","export class LoginRequest {\r\n  token = ''; // se presente, sto facendo una autologin\r\n  appId = 'M4'; // identificativo dell'applicazione che sta effettuando la login (da tabellare)\r\n  accountName = '';\r\n  password = '';\r\n  subscriptionKey!: string; // login su una specifica Subscription\r\n}\r\n\r\nexport class ChangePasswordInfo {\r\n  AccountName = '';\r\n  Password = '';\r\n  NewPassword = '';\r\n  IgnoreOldPassword = false;\r\n  JWTToken = '';\r\n}\r\nexport class OTPInfo {\r\n  AccountName = '';\r\n  Password = '';\r\n  Code = '';\r\n}\r\n\r\nexport interface CUCalendarJob\r\n\t{\r\n\t\t  jobid: number;\r\n\t\t  calendarid: number;\r\n\t\t  subscriptionkey: string;\r\n\t\t  customer: string;\r\n\t\t  instancekey: string;\r\n\t\t  currentmap: string;\r\n\t\t  destinationmap: string;\r\n\t\t  scheduledtime: Date;\r\n\t\t  estimatedupgradetime: number;\r\n\t\t  realupgradetime: number;\r\n\t\t  status: number;\r\n\t\t  notes: string;\r\n\t\t  creationdate: Date;\r\n\t}\r\n","export class LogoffRequest {\r\n    token: string | null;\r\n    constructor(token: string | null) {\r\n        this.token = token;\r\n    }\r\n}\r\n","export class StorageVars {\r\n    public static JWT = 'M4_jwt_token';\r\n    public static CULTURE = 'M4_culture';\r\n    public static UI_CULTURE = 'M4_ui_culture';\r\n    public static ACCOUNT_NAME = 'M4_account_name';\r\n    public static ACCOUNT_ROLES = 'M4_account_roles';\r\n    public static SUBSCRIPTION = 'M4_subscription';\r\n    public static SUBSCRIPTION_DESCRIPTION = 'M4_subscription_desc';\r\n    public static USER_GATEWAY_AUTOREDIRECT = 'lastLoggedRedirect';\r\n    public static INSTANCEKEY = 'M4_InstanceKey';\r\n    public static DONTSHOWUPDATEWARN = 'DontShowUpdateWarn';\r\n}\r\n","export class IsValidTokenRequest {\r\n    constructor(public token = '') {}\r\n}\r\n","export class OperationResult {\r\n    Result = false;\r\n    Message = '';\r\n    Code = 0;\r\n    Content!: any;\r\n}\r\n","<div class=\"app-dialog\" style=\" max-width:450px;\">\r\n    <h2>{{ title }}</h2>\r\n    <label>{{ message }}</label>\r\n\r\n    <mat-form-field style=\"min-width:100%\" class=\"mt10\">\r\n        <input matInput [placeholder]=\"placeHolder\" adminAutoFocus value=\"\" [(ngModel)]=\"newpwd\" type=\"password\" />\r\n    </mat-form-field>\r\n\r\n    <mat-form-field style=\"min-width:100%\" class=\"mt10\">\r\n        <input matInput [placeholder]=\"placeHolder2\" adminAutoFocus value=\"\" [(ngModel)]=\"newpwd2\" type=\"password\" />\r\n    </mat-form-field>\r\n    <div class=\"login-error\" *ngIf=\"error\">\r\n        <span class=\"k-icon k-i-warning\"></span>{{ error }}\r\n    </div>\r\n    <div class=\"mt20\">\r\n        <button (click)=\"cancel()\" class=\"left\" mat-raised-button>Cancel</button>\r\n\r\n        <button (click)=\"confirm()\" class=\"right\" mat-raised-button color=\"primary\">OK</button>\r\n    </div>\r\n</div>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogModule, MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-change-password-dialog',\r\n  templateUrl: './change-password-dialog.component.html',\r\n  styleUrls: ['./change-password-dialog.component.scss']\r\n})\r\nexport class ChangePasswordDialogComponent implements OnInit {\r\n\r\n  public title: string;\r\n  public error: string;\r\n  public message: string;\r\n  public placeHolder: string;\r\n  public placeHolder2: string;\r\n  public newpwd: string;\r\n  public newpwd2: string;\r\n\r\n  constructor(\r\n\r\n    public mdDialogRef: MatDialogRef<ChangePasswordDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) private data: any\r\n  ) {\r\n    this.error = '';\r\n    this.title = data.Title;\r\n    this.message = data.Message;\r\n    this.placeHolder = data.PlaceHolder;\r\n    this.placeHolder2 = data.PlaceHolder2;\r\n    this.newpwd = this.newpwd2 = '';\r\n  }\r\n\r\n  ngOnInit() { }\r\n  public cancel() {\r\n    this.error = '';\r\n    this.data = undefined;\r\n    this.mdDialogRef.close(this.data);\r\n  }\r\n\r\n  public confirm() {\r\n    this.error = '';\r\n    if (this.newpwd === this.newpwd2 && this.newpwd2 !== '' && this.newpwd2 !== undefined) {\r\n      this.data.NewPwd = this.newpwd;\r\n      this.mdDialogRef.close(this.data);\r\n    } else {\r\n      this.error = 'Passwords must be equal';\r\n    }\r\n  }\r\n}\r\n","<div style=\"z-index: 1\" style=\" max-width:400px;\">\r\n\r\n    <div style=\"padding:20px 0px ;\">\r\n        <img *ngIf=\"imagePath !== '' && imagePath !== undefined\" mat-card-image style=\"width:50%\" src=\"{{ imagePath }}\" />\r\n    </div>\r\n    <div style=\"padding:20px 0px ;\">\r\n        <h2>{{ title }}</h2>\r\n        <div style=\"padding:15px 0px ;\">\r\n            <p>{{ message }}</p>\r\n        </div>\r\n    </div>\r\n    <div style=\"padding:10px 0px ;\">\r\n        <mat-checkbox [(ngModel)]=\"dontshowanymore\" name=\"dontshow\" (change)=\"showOptions($event)\">\r\n            <span translate>{{ dontshow }}</span>\r\n        </mat-checkbox>\r\n    </div>\r\n\r\n    <div style=\"display: flex; flex-direction: row-reverse; justify-content: space-between;padding: 10px 0px 0px 30px;\">\r\n        <button kendoButton (click)=\"closeDialog()\" style=\" background: #e77b2d;\r\n                    padding: 4px 12px 4px 12px;\r\n                    background: #e77b2d;\r\n                    color: #fff;\r\n                    font-size: 14px;\r\n                    border-radius: 0px;\r\n                    border-color: rgba(0, 0, 0, 0);\">\r\n            <span style=\"letter-spacing: 3px; text-transform: uppercase\">OK</span>\r\n        </button>\r\n\r\n\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatCheckboxChange } from '@angular/material/checkbox';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-alert-dialog',\r\n  templateUrl: './alert-dialog.component.html',\r\n  styleUrls: ['./alert-dialog.component.css'],\r\n})\r\nexport class AlertDialogComponent implements OnInit {\r\n  public title: string;\r\n  public message: string;\r\n  public dontshow: string;\r\n  public subkey: string;\r\n  public imagePath: string;\r\n  public imageAlt: string;\r\n  dontshowanymore: boolean;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA)\r\n    private data: {\r\n      Message: string;\r\n      Title: string;\r\n      DontShow: string;\r\n      SubKey: string;\r\n      ImagePath: string;\r\n      ImageAlt: string;\r\n\r\n    },\r\n    private mdDialogRef: MatDialogRef<AlertDialogComponent>\r\n  ) {\r\n    this.title = '';\r\n    this.message = '';\r\n    this.dontshow = '';\r\n    this.subkey = '';\r\n    this.imagePath = '';\r\n    this.imageAlt = '';\r\n    this.dontshowanymore = false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.title = this.data.Title;\r\n    this.message = this.data.Message;\r\n    this.dontshow = this.data.DontShow;\r\n    this.subkey = this.data.SubKey;\r\n    this.imagePath = this.data.ImagePath;\r\n    this.imageAlt = this.data.ImageAlt;\r\n  }\r\n\r\n\r\nshowOptions(event: MatCheckboxChange): void {\r\n\r\n    if (this.dontshowanymore)\r\n    // document.cookie =\r\n      localStorage.setItem('DONTSHOWUPDATEWARN' , this.message);\r\n      else\r\n      localStorage.removeItem('DONTSHOWUPDATEWARN' );\r\n}\r\n  public closeDialog() {\r\n    this.mdDialogRef.close();\r\n\r\n  }\r\n}\r\n","<div class=\"app-dialog\" style=\" max-width:450px;\">\r\n    <h2>{{ title }}</h2>\r\n    <label>{{ message }}</label>\r\n\r\n    <mat-form-field style=\"min-width:100%\" class=\"mt10\">\r\n        <input matInput [placeholder]=\"placeHolder\" adminAutoFocus value=\"\" [(ngModel)]=\"inputValue\" type=\"password\" />\r\n    </mat-form-field>\r\n\r\n    <div class=\"mt20\">\r\n        <div style=\"display: flex; flex-direction: row-reverse; justify-content: space-between;padding: 10px 0px 0px 30px;\">\r\n            <button kendoButton (click)=\"cancel()\" style=\" background: #e77b2d;\r\n                    padding: 4px 12px 4px 12px;\r\n                    background: #e77b2d;\r\n                    color: #fff;\r\n                    font-size: 14px;\r\n                    border-radius: 0px;\r\n                    border-color: rgba(0, 0, 0, 0);\">\r\n            <span style=\"letter-spacing: 3px; \">{{ buttonCancel }}</span>\r\n            </button>\r\n            <button kendoButton (click)=\"closeDialog()\" style=\" background: #e77b2d;\r\n                    padding: 4px 12px 4px 12px;\r\n                    background: #e77b2d;\r\n                    color: #fff;\r\n                    font-size: 14px;\r\n                    border-radius: 0px;\r\n                    border-color: rgba(0, 0, 0, 0);\">\r\n            <span style=\"letter-spacing: 3px; text-transform: uppercase\"> OK </span>\r\n        </button>\r\n        </div>\r\n    </div>\r\n    <div style=\"display: flex; margin-top: 40px; justify-content: flex-end\">\r\n        <p class=\"link\" (click)=\"resendOTP()\">\r\n            <u *ngIf=\"done\">{{ resendOTPpLabel }}</u><u *ngIf=\"!done\">{{ resendOTPpLabelDone }}</u>\r\n        </p>\r\n    </div>\r\n    <div style=\"display: flex; margin-top: 20px; justify-content: flex-end\">\r\n        <p class=\"link\">\r\n            <mat-checkbox [(ngModel)]=\"alternative\" name=\"alternative\">\r\n                <span translate>{{ alternativelbl }}</span>\r\n            </mat-checkbox>\r\n        </p>\r\n    </div>\r\n\r\n</div>\r\n","import { Component, EventEmitter, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogModule, MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\r\n@Component({\r\n  selector: 'otp-dialog',\r\n  templateUrl: './otp.component.html',\r\n  styleUrls: ['./otp.component.css']\r\n})\r\n\r\nexport class OtpComponent implements OnInit {\r\n\r\n  public title: string;\r\n  public accname: string;\r\n  public message: string;\r\n  public placeHolder: string;\r\n  public inputValue: string;\r\n  public buttonCancel: string;\r\n  public resendOTPpLabel: string;\r\n  public resendOTPpLabelDone: string;\r\n  public alternative: boolean;\r\n  public alternativelbl: string;\r\n   public done: boolean;\r\n  resendRequested = new EventEmitter();\r\n  constructor(\r\n    public mdDialogRef: MatDialogRef<OtpComponent>,\r\n    @Inject(MAT_DIALOG_DATA) private data: any\r\n  ) {\r\n    this.title = data.Title;\r\n    this.accname = data.AccountName;\r\n    this.message = data.Message;\r\n    this.placeHolder = data.PlaceHolder;\r\n    this.inputValue = data.TextValue;\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n      this.buttonCancel = 'Annulla';\r\n      this.resendOTPpLabel  = 'Inviami un nuovo codice';\r\n       this.resendOTPpLabelDone  = 'Inviato! ';\r\n      this.alternativelbl = 'Usa metodo alternativo';\r\n    } else {\r\n      this.buttonCancel = 'Cancel';\r\n      this.resendOTPpLabel  = 'Send me a new code';\r\n      this.resendOTPpLabelDone  = 'Sent!';\r\n      this.alternativelbl = 'Use alternative way';\r\n    }\r\n    this.alternative = false;\r\n    this.done = true;\r\n  }\r\n\r\n  ngOnInit() { }\r\n\r\n  public cancel() {\r\n\r\n    this.data = undefined;\r\n    this.mdDialogRef.close(this.data);\r\n  }\r\n\r\n   public async resendOTP() {\r\n     this.resendRequested.emit(this.alternative);\r\n\r\n    this.done = false;\r\n    setTimeout(() => { this.done = true }, 3000)\r\n\r\n  }\r\n    public closeDialog() {\r\n  this.data.TextValue = this.inputValue;\r\n  this.mdDialogRef.close(this.data);\r\n  }\r\n}\r\n","import { Injectable, Inject, Injector, EventEmitter } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\n\r\nimport * as _ from 'lodash';\r\n\r\nimport { of, Subject } from 'rxjs';\r\nimport { tap, map, catchError, timeout } from 'rxjs/operators';\r\n\r\nimport { StorageVars } from './models/storage-vars';\r\n\r\nimport { LoginRequest, ChangePasswordInfo, OTPInfo } from './models/login-request';\r\nimport { LoginResponse } from './models/login-response';\r\nimport { LogoffRequest } from './models/logoff-request';\r\nimport { LogoffResponse } from './models/logoff-response';\r\nimport { IsValidTokenRequest } from './models/is-valid-token-request';\r\nimport { OperationResult } from './models/operation-result';\r\nimport { TbAuthEnvironment } from './models/auth-environment';\r\nimport { ChangePasswordDialogComponent } from './pages/change-password-dialog/change-password-dialog.component';\r\nimport { AlertDialogComponent } from './pages/alert-dialog/alert-dialog.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { OtpComponent } from './pages/otp-dialog/otp.component';\r\n\r\nlet authServiceInstance: TbAuthService;\r\nexport const authService = () => authServiceInstance;\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\n// ---------------------------------------------------------------------------\r\nexport class TbAuthService {\r\n  private static DEFAULT_ENV: TbAuthEnvironment = {\r\n    auth: {\r\n      url: 'http://localhost:10344/api/',\r\n      iupurl: 'http://localhost:52172/api/',\r\n      createAccountUrl: 'http://localhost:4200',\r\n      changePasswordUrl: 'http://localhost:56392/api/',\r\n      subscriptionSelection: false,\r\n      showSignUp: false,\r\n      appId: 'M4',\r\n      preLoginAppId: 'MCloudPreLogin',\r\n      redirectUrl: '/',\r\n      userGatewayUrl: '',\r\n      isRedirectExternal: true,\r\n      loginPageUrl: 'login',\r\n      sessionStorage: false,\r\n      snapshotServiceUrl: '',\r\n            // tslint:disable-next-line: max-line-length\r\n      updatemessageIt : 'Sono previste attività di manutenzione ed aggiornamento, per questo sulla tua subscription @@sub potrebbero verificarsi brevi disservizi il @@date, dalle ore @@starth alle ore @@endh' ,\r\n            // tslint:disable-next-line: max-line-length\r\n      updatemessageEn : 'Due to system maintenance and updates there might be disturbance in your subscription @@sub on the @@date, between @@starth and @@endh',\r\n      logoURL: 'https://magocloud-store-pdf.s3.eu-west-1.amazonaws.com/login-logo.png',\r\n            // tslint:disable-next-line: max-line-length\r\n      // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATgAAAA2CAYAAABTAoWuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTc0OEJEMDcwNDlBMTFFQTlDNzVDNDRGNkMzQ0EwRDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTc0OEJEMDgwNDlBMTFFQTlDNzVDNDRGNkMzQ0EwRDUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNzQ4QkQwNTA0OUExMUVBOUM3NUM0NEY2QzNDQTBENSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNzQ4QkQwNjA0OUExMUVBOUM3NUM0NEY2QzNDQTBENSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pl3e4DwAABUASURBVHja7F0JlBbFEe5ddhHlMqwoIggKKiLI4YkgRqOgIoo3niAeMQoxKsYoh6IRiREUjxgJCpJo8IqAkaAQNMGY4AEoKIquAgoRRTnkWBDY1JepfQ613XP2zP/v7tR7H+z0P1Pd0zNdU11VXV1QXl6uMqrxdADhCEInQgdCE0Jjwm6EAgJekrWE/xK+JLxPWEB4i7A0676M8pUKMgFXY+kwwrmEUwiHxuDzMmEK4UXCiqxbM8oEXEa5pJMI1xLOsMz3e8LThEcJr2fdnFEm4DJKk35CGEI4PoW6XiAMJKzMuj2jTMBllCTBnjaGcIHPeaWENwnzCB8SviWsY81sF0IJYW/l2Os68hR3Xw9+mwnDCfdmjyCjTMBllASdSphMqK/5bSthPuFvhGn8d1jqTriU0JXQxnDOG4TBhH9njyOjTMBlZIue8tDaHibcpRyvqC2CF/Z6jzp/pxzbX0YZZQIuo8iEqeRM5YR8SPor4VbCwgTr70K4h9DNUH/v7BFllAm4jKJQU8JcQjNRDnvY1YRJKbYFWuI1mvIJhAER+NUmtCW0VI4dsBGhHv+2gfAd4TPCYsIHPAXPKBNwmYCrJtSYNbO9RDkcB+cRluWgTefzVLlQlE8kXBbg+n0I5xBO5CnwXgHrXcX3PYu12cXZ65EJuIyqNn1K2E+UwSN6WI7b1ZaFTFNRDs/ujYZrTmIt72xCsYU2zORp86zsNalZVJh1QbWgsRrh9opy7GG5JkwXO7KwddMNhF+4jmsR+hD+wW3va0m4VQhMCLnXCKcrZ/lZRpkGl1EVoKGEO0XZ44TL87Ctr7CwcdPJyom7e1UjpN2EeLx3CIuUE7O3XDm2NwiruqwhNiccRejsIxxLWdB9kL0+mYDLKH+pk0Yz+rtybFb5SBA6W4QGtYOwTTlOBB39STneV2h2XwasBwHJxyknDhA2vF0154Dfj7NXqGYIOAwIRLw/zV/KXFNFe55R9r1hyJAB287nPGVJm/YkHKmcrB37E1rwwN/BGslSwkeEOYR3fXjhHtweUwiAfZhXFNqDp7XtWUjswYKnjPAFa00LWKhujlgHFvdPD3AevLAPcl/EIbxHVxLuEOXQGE/IREA1JxJwA8t/oEUQeDnGFa72LCbUt8i7FqHUxf+CFO/rQsKLhM3lwelDwmhCBw2/YZrz20doV13CAMI0wsaA7fqa8DThnIh9McaDN/i2TqD/D2TeuMeFhAPy4F3PkDDwz1Lxgl2X40ZtE+3pbZF3F8F7XQr3czbhzfL4NJVwGPPcTfP7HSHbVY8wgvBVzHb9h+8xbL8sF3y+I5yXwvNolA38mgN4UTcKpQ4G6zo5Uih7Kceb5qZdLPIfLI4bKCdWKwmCsRu50p5TTgxXXIJR/G3CJYTR4jcEuQ4Pwes0wid8TWML94l7RAjGMSHbUMpTXdzXwWySSJq+zeZtNcsGt4DtQdL+MTAH7VnOnjA3IXRgqgXeiMd6X1P+JdubbNIjylk5oKNtLAxeZxsb7GjrCUUsbPZloQFb1UEB6/spYVyA8/DhepaFi44gbF5SO2cU2cLXteQ+7OojyLBaol+IvmqUCZ2M0hZw0OrqpdwWDIqJmnJbAu7Pyomt0tFZyslhZoNmEHpqymGkv58dOV8E5IUcblcpZyWCibBgvmlAYzscF601v0Hw/56F36oAvOAcOZc/gs00v2cG/IzyxsmwwGBbOS/l+fIqQzvOsMD7Rz52pFct3cNoA//HCbvEtB3OMfC+MsD1JYSVmmthg7w6RrtwT+MM7XosswFlyDVMGlyFxtE8JTl7pccUy4YGB7viUNcxwigK1A/xWJiGIVh0e4w6ruapqZvA7wLWjGzQ3YRfibJinvZ6EUItDhRliOy/VAWPLfMiZAh5SqP1/5owzPK7srtywljasFYKmy1indYoZ7H9u2zqCEowDcg1roU8bd6YA53jcPVD+FBdLtvENtNP+f6iBq8Wcp8VungUsmlidUSeCCPaU7SpgPmVucrq87MLE8IEPt/z/X9nW4Mr59CGNCTtao822NDg1gmePQnTRVn/GPzbadr9LeGQBPrqflcdlwU4/xlN2+Yk0K4WhGWauk62wLuENc2XCesDeHbfJgwntArAuw177rfz/8AODp9KS9PoQRgvQphMBO/zJMKZEerZg7BBc6+vxGj70YJfRV/2EOfdzHVtCwHw2cLPfAmP2SGEY8KEiXgJuP+m8HAH+zzQuALuSsHvMy4/R5SXRuRfoBnYmG7vn2CfIaarZYDzOmr683WOB0yiXRBEH4n6EPfXMAa/uzUfqDAEwdHWo45DDNcNTvi9xzM4P2YIEcbuaSHqbOwR6hP1Po418Owlzru93C59xLGgB/uFiUgPnzRM35mgOv4jwm8TVvkl/4oF3ghtWCEM5xdF4D9O7bw3AVZedOTpRFK0RAXbj1ROjZFOqVvMqbgXfcPmjhXCczstAq/+3IeYkjeI0abL2YkyyPC7qS+2JPj8kM/uY+Wkk48TQoS+xnaNC/id852wiWljBW2I0YZtAcvLLPchTC5YnfIB96NxTq7E4JT2riEuW4BtGimOMWjfscgfAquheJDu+/uNOP+2kPzhQbxClF2i7KYCj0rnazymp6RQbxnb9tyEvRvCxMjB1jghpmCT9AB7sevl+LkcrZwwnP0s8oSgw54ap9dQX+n5LDea6AysbsI6zdtZ0vdxGfogKW+03Kg9VOVYscdYG7KVw2yoOJ6t0b6g4e3i+rJCwwm6r+dN4hiC7Zk8eegjxPEold7GzLPZ0L+vaM9JAa69R9OvkvDVRmYSBAp/xY4GrME9hB0eJYbrrlNOmE6uNsDpEKDuxfz+IQ5xJRvl9+Yx0c1HME7lj9iMKiScJrODqEjzG+59VxZcbZT3Lm6dWZPttJOCobHBlbCNR1JDyzaI8YJ/GaGYMMWSDe4YzT1015w3VpwzMyD/QsJace2v88Q93kljBytOuQ0Xavp/b59r+vnYXV4gHOfDA2uXB7H9WNJVGvtjG0Ndgyz3Rz0fB8n7hL4B+JxF+LdPP7X2cDLo1kLPsrj80e3Ic5/3K8N5Yeo6gvAHn3tf5n7GuoSX+7GNR2lc/raoWFXOVzaSXcItLdUhly7B5vFPg8bgJmQyCRIec7yY/oLG5slXUe5s9YRKP0sMwkbWirJzPc5HqMZEw29b+dozlZPmyIsQTvAgT8+fdJX3ZY19e46eCQLJ6xt+G8Pa5+QAfP6inIwvt/r0fVWhMOP9LeWElGGFz98M5+zr7sdCw4sGkhv2DuRpgA3qr7HbjHSppXEJgkeuJjC9EJi2PSfKgjhWThXHyMP2dZ68NCeL4z/kqB1/Esc9Pc79o8fz6aB5Rn6EGLaLCeMJ9/HUNFd0hjLn6BsU0fxzt8bWWUFwXBxaRQRclKziS3j8jTL8jhyAPUzMC132pTXit4ct3FBtjaaD3ZcqvC42MnBeotHevAaIFGj9fOb7SlXeFu/ZPHlhYK9p7zpepuw6bsLQ8+K4teG8/T3scx3ZHhWV8MW/IcfP5AlDOTbeeSgG3z+yoNPRJFX96RaPZ/ukScDtEAzc1FtVzvYRloaqnTOswpA6wfKN/1Ic3+Vz/nua6dTNHucXaYy9C/Pkocsd5t/OYVsWifepnuGdMy3+x5R1dRUfhGdoTBmgOR5T8jCEmcnnmvIOPO2t7gTt/E1NOZyYJ/uph4+KFwznD47RmF01QtO2dxbTs+bCJhPka/aA5stfx2MKLEMYVuaRBuemz3LYltVqZ89tXaVPH36m4frbqsEANCVKuMliHbeFrLu6kWk54AVB5r83azqzKGJDhotr8eWZbPlmb9MIriDT3vvFMRwhAz2m2e6+Q1Do+jx52FLwrslxe75x/V1HI+BwfJTmOoRTLK8Gg6+rpgyhLXMt1vFnpQ9M7lZDBNw8Q3m7IALucaHF6bSwIFRHM3W83vKNwrtytCgbE/BaCALpfervcb7cOGVHCg8SUzzEDl7LwneAqrx7lHym23P88m0XfSbbd7BBq5tRDQZeidJ75G1r1WVKH193kKoZBPmk29i8QVAPxjXieKgKHxE+RrzcMBw/b/lG5coITE3DJFOUG5McovTJMLcKgQbhXT+FB4msDchYAsM0QiEe00yjN/lodGlTQ6HpyiU7ppCc6rCl3+5Kb3P8IoG6dBsUNeF3pibQIk1Z/aAC7lmhUmOKFib0AF+Sn4myvglob2eJsrD2PaQVkt5W3VrZtUJwQjPZP4WHKGPZ1ms0Rzl4WuXwpcNa45au4w2q8rrHhoZrv6oGg86Ubn9VAnXpQpRq8TOoCaS7/9phYlAGaQRUi4DXyrCQZcp/S7ywJJdlPaeieeCkDe8izUuCaVepKOuQ0oPcYfjbLaTddFgOXzpowEU+Atk0hS6uBoPOZLYoSqAuE89tCd9jvmysrHtfysMIOEQRyyjy+wO+5DLA874EpgIXi7KoKy8wNZJu519ozpsvjnvkyYOG48ZtnG8d4kNkm7oH0MrWGq5tUg0EnGlP370TqKuJoX4507AtpApClidFe2nKtoSNIpbLn/ooc/CmSXtbo+wvabpOHH8ZU0Mc4cMfNEscQ4jXzZOBNUccn52jdsglYzpD+FLDte2qgYD7RumXyDVNoK7OmrKVamcverlB8MQRRiZNO03nFuRYe035hrACDms5N4XQ4jC1+4kouzWBG5Qa1pSY/KarnVN5w04kV0e8LNR/TBGuypOBJZ031+agDYdqhNQzhim1Lh1172og4NYZBLhtuygcSYdryuUKkDKD4KkTs24dbU6xn0sMGty6KOvAZKBvL8PXAySXUSCNye8t39wAnqK6aZQFvtIWN0zzskwUZT/Pk4E1jQdXBcEBcmHKbZAfPqwf1C0Z26bRhitMG0dXAyE302BSOddiHTcqvbdWhtpsMJgJSmLUfYCHqSQtMq2EeSOKgHtEVTZkP2KwM0jDfxKDTGYDwbKvZRb4jlM7J67Eg5SbRMsNYFoq836oaRK+0jLmcJLmQ5AUwbFxvCjz2mf3cY9nUNXpAUP5eBVtobkkJF3VbfpdbujXhQaNMmqYUx+DcFuWUv/CLGRazzs2agdLm9SRyln75SYZXoFo49cs31w7zdfnDov85T3crrGxjNEI+1Z5MLCkgEbIwIsp1f2kOH7PoMlUkCkFEuwqVX25EZSBfxmmdjb24p1uKH/MMPV/Q1NWrDHBBCFMC7tryv+TYv/CVLSbphzZfT4tjMFU7hI/UnxVLgrxBY9K/cXxbBVsr4KgJGPisJC9iyi7WfMi/UMl43AI6+2SoT3dVDDPdxxCzKSMoL/Y5xr0nymu8mk2g0Sl+co/h1zSZHr3kWL8wRh871J64zpoiKHcFFwPxSCss+FRQ/kLKfRpxQe7q2efazL69gqYXfMETTbNxoat6sLs2vNOwIy+xZrspN0TyEy7WNQxQ3POiZq++IA3nLbdnu2uOtYQ6vqcv0LTtiEJZfEdr6nrtyE2kd7kkak1bJuxo9h81/UjPLYN1NHPLPfNOI97m0ZoGoIXsmtP8Ml87HX9W4brZodogylD7yZD9mjT+c0i9OWpvI2gie7x2jawV4iK3hXX3kKoranwiAQE3LWWtv3zwyWa+2muOW+k5rzPCYdbbMt1gv82ToXtdU3bFFJy1+FBJWluSD7H+aSjXsRpx/f0EWwPG66HkNk9oIDrn8LH0k0bCXcQ9vG4vhUL+q89+OCj1yDiVn+ghT5bEaJ9ozyuvzGkQGxQHmxrzv0IF/Oevl70T7+d7eGReCmgmthFzOlXsXHxSDEXPjGE6glPW2dhxJxqMGQ2cx0j5mpyQurwamHrg53tGs15SGyoy7I6jKci6yLW34EdGnJ5GzxiTZV/zBFykk0xTCdhWlgQo2+wPG60qpx6ej5PH8KGC1zOBngvAk+ELMEz+y1PrZqxTfZIn2vhmZ0rzA6LNeeVsrmjdsj2V0zzfq4qB4OXsB26nY+DaC6bgFa6HHYYE4f71I1lekgcGiRBKEwCV3j8Xspj8UM2jcDG3pZwrDKvmsByKdPaV7y/uuScb7GJQhdPt4P7H882yDYCMJ2dqtwrSGJqcMBzPhJ1r5D8gmhwV6SkvZk0i+88zp1o6AfsdD+acGiIaUg/3qhZR5tDasbtCV8ZeL3GG54Uh2jbAMI8jw2J426as9TyRsHYjPuoEFPUuHSKx/1NSqC+qYRdQ/bzBIv1Y2p6UIQprS0aqKvXxpo4eFRNkfLzVDILi4d5ODiCEAKQEYj6fUDD/Vb+ylS40pFJBYk1ZxgcH6Uaby7qvIEBryK2hlvEXrYt/FVsyAb6DmxYN4V14DokifwkxD0v5HueqtFyjmOsYMMtvtwf8xe5jO+3KWseR7FGbmrbSyr+ygloPgezJmcjtAj8eqp098zw0lwvZW3rFgv1bGWHwr0Rrr2MIwHiJp39iB0mS3LgwHmHtcNZerdcZTvaaRG+uE8YpGqfCLzm+fA4XaNNFYas48wIX4jvxfEbPnUc72NziUpjLWikYxJoF5wfNyWgPffXzDKCEraQ+6UP/3YJaRQ9A2rVT8ao43lCCwt9jDG2MkL9ZWyPqxWgjrss9u1W1ljP8au3SFXO6xZl2cYoje1piYq2ZMqvPTL04SEVPtlklAwLRRr740GqctBzBb3KWgi+Lter+Hm5oIXcackFDy1yDmvCnSzwQ0bZ4SE1yqA0kXEi2/u6cr+a1kB+wnbh6Rzm42ef3MTXFCg7SUsrknquDahVI5wKAfG9WWvvosxBt2vYXjqTx9ZiS308hWcj0JZP4T42JQTYwu2ezM89aKr+5Wyf3xqyL3ew7Rq2ViTCwHrmfwWtF04GDMQfC4P2exE6CQZZd9aKHso7uNNEM4VTorMw1uJl7+c63jPC1APLZGzsQN9MBdstvi5PA/ry4AxKm3igPpVgbNHZ3J+9VLjI+k08MO7VGNOTpibcj5jS78aDbh0PolxMk2wS7gmrZhorJxgYg3w9v2cfq8prwZOgIm5Dczat1OI2rOH+/bqqdOb/3a/KCdjDjWAbsgci8jqQ+eChYC3kiIh8ICQRhd+IB7ZMrdSIPUAteIBFSYt0rEvzCxs8W4sH1D0q/F6dIGyD140/JK1YYy3mdsBus5E9aK+zpzCtlwkvM5ZXnaCcHcMasPZcwG3bwELkPfbyza5KL3pGNZP+J8AADAPXwGErvAUAAAAASUVORK5CYII='\r\n    },\r\n  };\r\n\r\n  private env: TbAuthEnvironment;\r\n  loggedOut$ = new Subject();\r\n  errorMessage = '';\r\n  okMessage = '';\r\n  callLoginAfterOTPRequest = false;\r\n  reLoginAfterOTP = new EventEmitter();\r\n  get router() {return this.injector.get<Router>(Router);}\r\n\r\n  // ---------------------------------------------------------------------------\r\n  constructor(@Inject('env') env: TbAuthEnvironment, private http: HttpClient, private injector: Injector, private dialog: MatDialog) {\r\n    authServiceInstance = this;\r\n    this.env = _.defaultsDeep(env, TbAuthService.DEFAULT_ENV, env);\r\n    console.log('TbAuthEnvironment', this.env);\r\n    this.callLoginAfterOTPRequest = false;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async checkConnection() {\r\n    return await this.http\r\n      .get(this.getBaseUrl())\r\n      .pipe(\r\n        timeout(5000),\r\n        map((__) => true)\r\n      )\r\n      .toPromise()\r\n      .catch((err: HttpErrorResponse) => {\r\n        this.errorMessage = err.message;\r\n        return false;\r\n      })\r\n      .catch((err) => false);\r\n  }\r\n\r\n  /**\r\n   * Ritorna la base url del backend,\r\n   * caricata da un file di configurazione caricato dinamicamente (assets/environment.json)\r\n   */\r\n  getBaseUrl = (): string => this.env.auth.url;\r\n  getSnapshotServiceUrl = (): string => this.env.auth.snapshotServiceUrl;\r\n  getLoginPageUrl = (): string => this.env.auth.loginPageUrl;\r\n\r\n  /*\r\n{\r\n  type: JWT,\r\n  appid: M4,\r\n  securityValue: jwtEncoded\r\n}\r\n*/\r\n// modifica per uniformare l header,o che arriva un po capitalizzato un po no. //rif: Ilaria e Luca\r\n  // ---------------------------------------------------------------------------\r\n  getAuthorizationHeader(): string {\r\n    return JSON.stringify({\r\n      type: 'JWT',\r\n      appId: 'M4',\r\n      securityValue: this.getToken(),\r\n    });\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  prelogin(loginRequest: LoginRequest): Promise<LoginResponse> {\r\n    //console.log('prelogin');\r\n    // console.log('authService.login - loginRequest', loginRequest);\r\n    return this.http\r\n      .post<LoginResponse>(this.getPreLoginUrl(), loginRequest)\r\n      .pipe(\r\n        map((loginResponse: LoginResponse) => {\r\n          if (!loginResponse.Result) {\r\n            if (loginResponse.ResultCode === 19) {\r\n              // mi sposto su pagina per cambio password e nuovo tentativo di login\r\n              console.log('AuthService: Change Password Needed');\r\n              this.openChangePasswordDialog(loginRequest);\r\n            } else if (loginResponse.ResultCode === 4) {\r\n              console.log('AuthService: Account confirmation Needed');\r\n              // mi sposto su pagina per attivare l'account che non ha ancora effettuato la procedura?\r\n            } else if (loginResponse.ResultCode === 58) {\r\n              console.log('AuthService: Account Locked');\r\n              loginResponse.Message = this.getLockedUserMessage(loginResponse.Message);\r\n            } else if (loginResponse.ResultCode === 143) {\r\n              console.log('AuthService: otp code needed');\r\n              this.openOTPDialog(loginRequest);\r\n\r\n            }\r\n\r\n            if (loginResponse.ResultCode === 143) {\r\n              this.errorMessage = ''; // non mostro errore rosso che sembra grave\r\n              // this.okMessage = loginResponse.Message;\r\n            } else {\r\n              this.okMessage = '';\r\n              this.errorMessage = loginResponse.Message;\r\n              //clear password todo\r\n             }\r\n            return loginResponse;\r\n\r\n          }\r\n\r\n          // non serve qua , viene gia gestito prima\r\n         // if (this.callLoginAfterOTPRequest)\r\n         //   this.callLoginAfterOTPRequest = false;\r\n         //   console.log('relogin emitted');\r\n         //   this.reLoginAfterOTP.emit();\r\n         // }\r\n          return loginResponse;\r\n        })\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  login(loginRequest: LoginRequest): Promise<LoginResponse> {\r\n    let redologin = false;\r\n    // console.log('authService.login - loginRequest', loginRequest);\r\n   const loginresponse = this.http\r\n      .post<LoginResponse>(this.getLoginUrl(), loginRequest)\r\n      .pipe(\r\n        map((loginResponse: LoginResponse) => {\r\n\r\n          if (!loginResponse.Result) {\r\n            if (loginResponse.ResultCode === 19) {\r\n              // mi sposto su pagina per cambio password e nuovo tentativo di login\r\n              console.log('AuthService: Change Password Needed');\r\n              this.openChangePasswordDialog(loginRequest);\r\n              redologin = true;\r\n            } else if (loginResponse.ResultCode === 143) {\r\n              // mi sposto su pagina per richiesta otp\r\n              console.log('AuthService: otp code Needed');\r\n              this.openOTPDialog(loginRequest);\r\n              redologin = true;\r\n              // todo cose tipo mostrare una maschera che accetti il codice e lo rimandi indietro per il check\r\n            } else if (loginResponse.ResultCode === 4) {\r\n              console.log('AuthService: Account confirmation Needed');\r\n              // mi sposto su pagina per attivare l'account che non ha ancora effettuato la procedura?\r\n              // o ammetto che la password sia  il codice? ma in relatà ogni sito lo fa in due step\r\n              // col click sull mail\r\n            } else if (loginResponse.ResultCode === 58) {\r\n              console.log('AuthService: Account Locked' + loginResponse.Message);\r\n              loginResponse.Message = this.getLockedUserMessage(loginResponse.Message);\r\n            } else if (loginResponse.ResultCode === 149) {\r\n              console.log('AuthService: Subscription requires 2FA' + loginResponse.Message);\r\n              loginResponse.Message = this.get2FARequiredMessage(loginRequest.subscriptionKey);\r\n            } else {\r\n              this.clearStorage();\r\n              console.log('AuthService: Clearing storage due to Login failure, result code ', loginResponse.ResultCode);\r\n              console.log('LoginRequest by account ' + loginRequest.accountName + ' token:' + loginRequest.token);\r\n            }\r\n\r\n            loginResponse.Message = loginResponse.Message ? loginResponse.Message : 'Login error...';\r\n            console.log(loginResponse.Message);\r\n            if (loginResponse.ResultCode === 143) {\r\n              this.errorMessage = ''; // non mostro errore rosso che sembra grave\r\n             // this.okMessage = loginResponse.Message;\r\n            } else {\r\n                this.okMessage = '';\r\n                this.errorMessage = loginResponse.Message;\r\n             }\r\n            return loginResponse;\r\n          }\r\n\r\n          if (this.getName(loginResponse)) {\r\n            this.storageData(loginResponse);\r\n            return loginResponse;\r\n         } else {\r\n           console.log('AuthService: LogOff due to Account not allowed.');\r\n           this.logoff();\r\n           this.clearStorage();\r\n           loginResponse.Message = 'Account not allowed.';\r\n           loginResponse.JwtToken = '';\r\n           loginResponse.ResultCode = 999;\r\n           loginResponse.Result = false;\r\n           return loginResponse;\r\n         }\r\n        })\r\n      )\r\n      .toPromise();\r\n\r\n    if (redologin)\r\n      return this.login(loginRequest);\r\n    else\r\n      return loginresponse;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  getLockedUserMessage(messageFromLogin: string) {\r\n    if (!messageFromLogin)\r\n      return messageFromLogin;\r\n    const seconds: number = +messageFromLogin;\r\n    let msg = messageFromLogin;\r\n    if (isNaN(seconds))\r\n      return msg;\r\n    if (seconds < 60 && seconds > -1)\r\n      msg = `Login Locked. Please try again in ${seconds} seconds...`;\r\n    else if (seconds >= 60) {\r\n      const minVal = Math.round(seconds / 60);\r\n      msg = (minVal === 1) ?\r\n        `Login Locked. Please try again in one minute...` :\r\n        `Login Locked. Please try again in ${minVal} minutes...`;\r\n    }\r\n    return msg;\r\n  }\r\n\r\n   // ---------------------------------------------------------------------------\r\n  get2FARequiredMessage(description: string) {\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH')\r\n     return `Questa subscription ${description} richiede l'autenticazione a due fattori! Leggi la mail per ulteriori dettagli`;\r\n    return `This Subscription ${description} requires two factor autentication! Please read the Emails for further details.`;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async openUpdateAlertDialog(info: string, title: string, dontshow: string, accountName: string, subscriptionKey: string) {\r\n    this.errorMessage = '';\r\n\r\n    const dialogRef = this.dialog.open(AlertDialogComponent, {\r\n      data: {\r\n        Title: title,\r\n        Message: info,\r\n        DontShow: dontshow,\r\n        SubKey: subscriptionKey,\r\n        ImagePath: this.getLogoURL()\r\n      },\r\n    });\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      //  console.log('afterClosedAlert');\r\n      this.okMessage = '';\r\n      this.errorMessage = '';\r\n\r\n      if (this.isRedirectExternal()) {\r\n        console.log('go external.');\r\n        this.getRedirectUrlForSubscription(accountName, subscriptionKey);\r\n        return;\r\n      }\r\n\r\n      console.log('go internal!');\r\n      this.router.navigate([this.getRedirectUrl()]);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async openChangePasswordDialog(loginRequest: LoginRequest) {\r\n    this.errorMessage = '';\r\n\r\n    const opRes = await this.getSymbolsToPromise();\r\n    const pswRulesSymbol = opRes.Content;\r\n    const dialogRef = this.dialog.open(ChangePasswordDialogComponent, {\r\n      data: {\r\n        Title: 'Change Password',\r\n        // tslint:disable-next-line:max-line-length\r\n        Message: 'Please choose a new password. The password must be at least 8 characters long and must contain elements of 3 of the following 4 categories: standard uppercase characters (A - Z), standard lowercase characters (a - z), numbers (0 - 9), symbols ' + pswRulesSymbol,\r\n        PlaceHolder2: 'Confirm Password',\r\n        NewPwd: ''\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(async (data: { NewPwd: string | undefined }) => {\r\n      if (data === undefined) return;\r\n      if (data.NewPwd === undefined || data.NewPwd === '') {\r\n        alert('Write a valid AccountName');\r\n        return;\r\n      }\r\n      this.errorMessage = '';\r\n      const cpi: ChangePasswordInfo = new ChangePasswordInfo();\r\n      cpi.AccountName = loginRequest.accountName;\r\n      cpi.IgnoreOldPassword = false;\r\n      cpi.JWTToken = loginRequest.token;\r\n      cpi.NewPassword = data.NewPwd;\r\n      cpi.Password = loginRequest.password;\r\n\r\n      loginRequest.password = data.NewPwd;\r\n      const result = await this.changePassword(cpi).catch((err) => {\r\n        this.errorMessage = err.error && err.error.Message;\r\n        return;\r\n      });\r\n\r\n      // todo controlla come vengono mostrati errori\r\n      if (result && result.Result) {\r\n        this.errorMessage = '';\r\n        this.okMessage = 'Password changed succesfully!';\r\n        // la login la fa  a mano altrimenti mi perdo\r\n      } else {\r\n        // errore già indicato\r\n        loginRequest.token = '';\r\n        loginRequest.password = '';\r\n        loginRequest.subscriptionKey = '';\r\n        loginRequest.appId = '';\r\n      }\r\n    });\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async getSymbolsToPromise(): Promise<OperationResult> {\r\n        const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n        return this.http.get<OperationResult>(this.getSymbolsUrl(), {headers}).toPromise();\r\n    }\r\n\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async openOTPDialog(loginRequest: LoginRequest) {\r\n\r\n    this.errorMessage = '';\r\nvar mes=   (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') ?\r\n`Prego inserire il codice OTP ricevuto via mail o SMS a seconda della modalità impostata.`:\r\n`Please insert the OTP code. Depending on the mode set, the OTP is sent either by e-mail or by SMS.`;\r\n\r\nvar tit=   (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') ?\r\n`Autenticazione a due fattori`:\r\n`Two-factory authentication`;\r\n\r\nconst dialogRef = this.dialog.open(OtpComponent, {\r\n      data: {\r\n        Title: tit,\r\n        AccountName: loginRequest.accountName,\r\n\r\n        Message: mes,\r\n        PlaceHolder: 'Code',\r\n        TextValue: '',\r\n      },\r\n    });\r\n    const sub = dialogRef.componentInstance.resendRequested.subscribe((alternative: boolean) => {\r\n      this.resendOTP(loginRequest.accountName, alternative);\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(async (data: { TextValue: string | undefined }) => {\r\n      if (data === undefined) return;\r\n      if (data.TextValue === undefined || data.TextValue === '') {\r\n        alert('Write a valid Code');\r\n        return;\r\n      }\r\n      this.errorMessage = '';\r\n      /*const cpi: OTPInfo = new OTPInfo();\r\n      cpi.AccountName = loginRequest.accountName;\r\n      cpi.Code = data.Code;\r\n      cpi.Password = loginRequest.password;*/\r\n\r\n      loginRequest.password = data.TextValue;\r\n      this.callLoginAfterOTPRequest = true;\r\n\r\n      //non devo richiamare prelogin ma solo fare emit\r\n      //console.log('reLoginAfterOTP emitted');\r\n      this.reLoginAfterOTP.emit();\r\n      //this.prelogin(loginRequest);\r\n    });\r\n  }\r\n\r\n  async isValidToken(authtoken = ''): Promise<OperationResult> {\r\n    if (!authtoken) {\r\n      const opres = new OperationResult();\r\n      opres.Message = 'No authtoken';\r\n      return opres;\r\n    }\r\n\r\n    return this.http\r\n      .post<OperationResult>(this.getIsValidTokenUrl(), new IsValidTokenRequest(authtoken))\r\n      .pipe(\r\n        tap((jObj: OperationResult) => {\r\n          // console.log('isValidToken - response', jObj);\r\n          if (!jObj.Result) {\r\n            jObj.Message = jObj.Message ? jObj.Message : 'isValidToken error...';\r\n            console.log('AuthService: Clearing storage due to Token Validation failure');\r\n            console.log('token: ' + authtoken);\r\n            this.clearStorage();\r\n            this.errorMessage = jObj.Message;\r\n          }\r\n        }),\r\n        catchError((error: HttpErrorResponse) => {\r\n          console.error(`Error Code: ${error.status}\\nMessage: ${error.message}`);\r\n          const res = new OperationResult();\r\n          res.Code = 666;\r\n\r\n          if (!this.router.routerState.snapshot.url.includes(this.getLoginPageUrl()))\r\n            this.router.navigate([this.getLoginPageUrl()]);\r\n          return of(res);\r\n        })\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  public getCompaniesForUser(user: string) {\r\n    return this.http.get<OperationResult>(this.getSubsKeysForAccountUrl() + user).pipe(\r\n      map((res: any) => {\r\n        if (!res || !res.Result) return [];\r\n        return res.Content && res.Content.subscriptions ? res.Content.subscriptions : [];\r\n      })\r\n    );\r\n  }\r\n\r\npublic getSymbolsUrl() {\r\n    return this.getChangePasswordUrl() + 'getsymbols/';\r\n  }\r\n\r\n  public getIsValidTokenUrl() {\r\n    return this.getBaseUrl() + 'isvalidtoken/';\r\n  }\r\n\r\n  public getLoginUrl() {\r\n    return this.getBaseUrl() + 'login/';\r\n  }\r\n  getPreLoginUrl() {\r\n    return this.getBaseUrl() + 'login/';\r\n  }\r\n\r\n  public getLogoutUrl() {\r\n    return this.getBaseUrl() + 'logoff/';\r\n  }\r\n\r\n  public getChangePasswordApiUrl() {\r\n    return this.getChangePasswordUrl() + 'changepassword/';\r\n  }\r\n\r\n  public resendOTPUrl() {\r\n    return this.getChangePasswordUrl() + 'resendotp/';\r\n  }\r\n\r\n  public getResetPasswordUrl() {\r\n    return this.getChangePasswordUrl() + 'resetpassword/';\r\n  }\r\n\r\n  public getSubsKeysForAccountUrl() {\r\n    return this.getBaseUrl() + 'subscriptionskeysforaccount/';\r\n  }\r\n\r\n  /*async sendOTP(cpi: OTPInfo): Promise<OperationResult> {\r\n     const bodyString = JSON.stringify(cpi);\r\n     const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n     // tslint:disable-next-line: align\r\n     return this.http\r\n         .post<OperationResult>(this.login(), bodyString, { headers })\r\n         .pipe(\r\n             map((res: any) => {\r\n                 if (!res || !res.Result) {\r\n                     this.errorMessage = res.Message + ' (Code:' + res.Code + ')';\r\n                     return res;\r\n                 }\r\n                 return res;\r\n             }),\r\n             catchError((error: HttpErrorResponse) => {\r\n                 console.error(`Error Code: ${error.status}\\nMessage: ${error.message}`);\r\n                 const res = new OperationResult();\r\n                 res.Code = 666;\r\n                 return of(res);\r\n             })\r\n         )\r\n         .toPromise();\r\n }*/\r\n\r\n  async changePassword(cpi: ChangePasswordInfo): Promise<OperationResult> {\r\n    const bodyString = JSON.stringify(cpi);\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n    // tslint:disable-next-line: align\r\n    return this.http\r\n      .post<OperationResult>(this.getChangePasswordApiUrl(), bodyString, { headers })\r\n      .pipe(\r\n        map((res: any) => {\r\n          if (!res || !res.Result) {\r\n            this.errorMessage = res.Message + ' (Code:' + res.Code + ')';\r\n            return res;\r\n          }\r\n          return res;\r\n        }),\r\n        catchError((error: HttpErrorResponse) => {\r\n          console.error(`Error Code: ${error.status}\\nMessage: ${error.message}`);\r\n          const res = new OperationResult();\r\n          res.Code = 662;\r\n          return of(res);\r\n        })\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n   async resendOTP(accname: string, alternative: boolean): Promise<OperationResult> {\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n    return this.http\r\n      .post<OperationResult>(this.resendOTPUrl() + accname + '/' + alternative, { headers })\r\n      .pipe(\r\n        map((res: any) => {\r\n          if (!res) {\r\n            res = new OperationResult();\r\n            res.Code = 663;\r\n          }\r\n          return res;\r\n        }),\r\n        catchError((error: HttpErrorResponse) => {\r\n          console.error(`Error Code: ${error.status}.\\nMessage: ${error.message}`);\r\n          const res = new OperationResult();\r\n          res.Message = `Error Code: ${error.status}.\\nMessage: ${error.message}`;\r\n          res.Code = 669;\r\n          return of(res);\r\n        })\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  async resetpassword(accname: string): Promise<OperationResult> {\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n    // tslint:disable-next-line: align\r\n    return this.http\r\n      .post<OperationResult>(this.getResetPasswordUrl() + accname, { headers })\r\n      .pipe(\r\n        map((res: any) => {\r\n          if (!res) {\r\n            res = new OperationResult();\r\n            res.Code = 663;\r\n          }\r\n          return res;\r\n        }),\r\n        catchError((error: HttpErrorResponse) => {\r\n          console.error(`Error Code: ${error.status}.\\nMessage: ${error.message}`);\r\n          const res = new OperationResult();\r\n          res.Message = `Error Code: ${error.status}.\\nMessage: ${error.message}`;\r\n          res.Code = 661;\r\n\r\n          if (!this.router.routerState.snapshot.url.includes(this.getLoginPageUrl()))\r\n            this.router.navigate([this.getLoginPageUrl()]);\r\n          return of(res);\r\n        })\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  public logoff() {\r\n    const logoffRequest: LogoffRequest = new LogoffRequest(this.getToken());\r\n\r\n    return this.http\r\n      .post<LogoffResponse>(this.getLogoutUrl(), logoffRequest)\r\n      .pipe(\r\n        map((logoffResponse: LogoffResponse) => {\r\n          if (logoffResponse.Result) {\r\n            console.log('AuthService: Clearing storage due to Logoff');\r\n            this.clearStorage();\r\n            this.loggedOut$.next();\r\n          }\r\n\r\n          return logoffResponse;\r\n        })\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  public navigateUserGateway() {\r\n    console.log('entering navigateUserGateway..');\r\n    let userGatewayUrl = this.getUserGatewayUrl();\r\n\r\n    // if usergateway url exists, then redirect to it\r\n    if (userGatewayUrl !== '') {\r\n      console.log(`Found getUserGatewayUrl ${userGatewayUrl}`);\r\n      document.location.href = userGatewayUrl;\r\n      return;\r\n    }\r\n\r\n    // otherwise, redirect to login\r\n    this.router.navigate([this.getLoginPageUrl()]);\r\n  }\r\n\r\n  public getRedirectUrlForSubscription(accountName: string, subscriptionKey: string) {\r\n    this.getInstancesMapForUser(accountName).subscribe(\r\n      (res) => {\r\n        const map: Array<{ SubscriptionKey: string; Description: string; InstanceKey: string }> = res as Array<{\r\n          SubscriptionKey: string;\r\n          Description: string;\r\n          InstanceKey: string;\r\n        }>;\r\n        if (!map || map.length === 0) {\r\n          throw 'instanceMap is invalid';\r\n        }\r\n        const currentInstanceKey: string = map.filter((k) => k.SubscriptionKey === subscriptionKey).map((j) => j.InstanceKey)[0];\r\n        this.getSnapshot(currentInstanceKey, subscriptionKey).subscribe(\r\n          (res) => {\r\n            if (!res || res === [] || res.length === 0) throw 'snapshot is empty';\r\n            // we have now the snapshot\r\n            const services: Array<{ ServiceType: string; Url: string; ProductVersion: string; Port: number }> = res[\r\n              'Services'\r\n            ] as Array<{ ServiceType: string; Url: string; ProductVersion: string; Port: number }>;\r\n\r\n            let redirectUrl: string = services\r\n              .filter((i) => i.ServiceType === 'M4FRONTEND' || i.ServiceType === 'APP_FRONTEND')\r\n              .map((f) => f.Url)[0];\r\n            console.log(`Designated redirect is ${redirectUrl}`);\r\n            const baseRedirectUrl = `${redirectUrl}?jwt=${this.getToken()}&subKey=${subscriptionKey}&instanceKey=${currentInstanceKey}`;\r\n\r\n            console.log(`Designated final redirect is ${baseRedirectUrl}`);\r\n            console.log(`Effect leads to cause`);\r\n            localStorage.setItem('lastLoggedRedirect', baseRedirectUrl);\r\n            document.location.href = baseRedirectUrl;\r\n          },\r\n          (err) => {\r\n            console.log('snapshot cannot be obtained');\r\n            throw 'snapshot cannot be obtained';\r\n            //this.router.navigate([this.getRedirectUrl()]);\r\n          }\r\n        );\r\n      },\r\n      (err) => {\r\n        console.log('getRedirectUrlForSubscription ia about to fail...');\r\n        console.log(err);\r\n        throw 'getInstancesMapForUser failed';\r\n      }\r\n    );\r\n  }\r\n  public getInstancesMapForUser(user: string) {\r\n    return this.http.get<OperationResult>(this.getInstancesMapForAccountUrl() + user).pipe(\r\n      map((res: any) => {\r\n        if (!res || !res.Result) return [];\r\n        return res.Content;\r\n      })\r\n    );\r\n  }\r\n\r\n  public async getCalendar(subscriptionKey: string) {\r\n    return await this.http.get<OperationResult>(`${this.getCalendarUrl()}?SubscriptionKey=${subscriptionKey}`/*, { headers }*/)\r\n      .pipe(\r\n        map((res: any) => {\r\n          if (!res || !res.Result) {\r\n            this.errorMessage = res.Message + ' (Code:' + res.Code + ')';\r\n            return res;\r\n          }\r\n          return res;\r\n        }),\r\n        catchError((error: HttpErrorResponse) => {\r\n          console.error(`Error Code: ${error.status}\\nMessage: ${error.message}`);\r\n          const res = new OperationResult();\r\n          res.Code = 662;\r\n          return of(res);\r\n        })\r\n      )\r\n      .toPromise();\r\n\r\n  }\r\n\r\n\r\n  public getSnapshot(instanceKey: string, subscriptionKey: string) {\r\n    return this.http.get<OperationResult>(this.getSnapshotServiceUrl() + instanceKey + '?subscriptionKey=' + subscriptionKey).pipe(\r\n      map((res: any) => {\r\n        if (!res || !res.Result) return [];\r\n        return res.Content;\r\n      })\r\n    );\r\n  }\r\n\r\n  public getInstancesMapForAccountUrl() {\r\n    return this.getBaseUrl() + 'instancesMap/';\r\n  }\r\n\r\n  public getCalendarUrl() {\r\n    return this.getIupUrl() + 'calendarjobs/';\r\n  }\r\n\r\n  public getUpdateMessage() {\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH')\r\n      return this.getUpdateMessageIt();\r\n    else\r\n      return this.getUpdateMessageEn();\r\n  }\r\n\r\n  public clearStorage() {\r\n    sessionStorage.removeItem(StorageVars.JWT);\r\n    sessionStorage.removeItem(StorageVars.CULTURE);\r\n    sessionStorage.removeItem(StorageVars.UI_CULTURE);\r\n    sessionStorage.removeItem(StorageVars.ACCOUNT_ROLES);\r\n\r\n    localStorage.removeItem(StorageVars.JWT);\r\n    localStorage.removeItem(StorageVars.CULTURE);\r\n    localStorage.removeItem(StorageVars.UI_CULTURE);\r\n    localStorage.removeItem(StorageVars.ACCOUNT_ROLES);\r\n    localStorage.removeItem(StorageVars.USER_GATEWAY_AUTOREDIRECT);\r\n  }\r\n\r\n  storageSubscriptionData(subscriptionKey: string, subscriptionDescription: string) {\r\n    if (this.env.auth.sessionStorage) {\r\n      sessionStorage.setItem(StorageVars.SUBSCRIPTION, subscriptionKey);\r\n      sessionStorage.setItem(StorageVars.SUBSCRIPTION_DESCRIPTION, subscriptionDescription);\r\n    } else {\r\n      localStorage.setItem(StorageVars.SUBSCRIPTION, subscriptionKey);\r\n      localStorage.setItem(StorageVars.SUBSCRIPTION_DESCRIPTION, subscriptionDescription);\r\n    }\r\n  }\r\n\r\n  storageQueryParams(subscriptionKey: string, instanceKey: string) {\r\n    if (this.env.auth.sessionStorage) {\r\n      sessionStorage.setItem(StorageVars.SUBSCRIPTION, subscriptionKey);\r\n    } else {\r\n      localStorage.setItem(StorageVars.SUBSCRIPTION, subscriptionKey);\r\n    }\r\n    this.setInstanceKey(instanceKey);\r\n  }\r\n\r\n\r\n   private getName(loginResponse: LoginResponse) {\r\n    return  loginResponse.AskingProcess === this.getAppId();\r\n   }\r\n\r\n  private storageData(loginResponse: LoginResponse) {\r\n    const respCulture: string =\r\n      loginResponse.RegionalSettings === undefined || loginResponse.RegionalSettings.length === 0\r\n        ? window.navigator.language\r\n        : loginResponse.RegionalSettings;\r\n    const respUiCulture: string =\r\n      loginResponse.Language === undefined || loginResponse.Language.length === 0\r\n        ? window.navigator.language\r\n        : loginResponse.Language;\r\n\r\n    if (this.env.auth.sessionStorage) {\r\n      sessionStorage.setItem(StorageVars.JWT, loginResponse.JwtToken);\r\n      sessionStorage.setItem(StorageVars.CULTURE, respCulture);\r\n      sessionStorage.setItem(StorageVars.UI_CULTURE, respUiCulture);\r\n      sessionStorage.setItem(StorageVars.ACCOUNT_ROLES, JSON.stringify(loginResponse.Roles));\r\n\r\n      if (loginResponse.AccountName) sessionStorage.setItem(StorageVars.ACCOUNT_NAME, loginResponse.AccountName);\r\n      if (loginResponse.SubscriptionKey) sessionStorage.setItem(StorageVars.SUBSCRIPTION, loginResponse.SubscriptionKey);\r\n      if (loginResponse.SubscriptionDesc)\r\n        sessionStorage.setItem(StorageVars.SUBSCRIPTION_DESCRIPTION, loginResponse.SubscriptionDesc);\r\n    } else {\r\n      localStorage.setItem(StorageVars.JWT, loginResponse.JwtToken);\r\n      localStorage.setItem(StorageVars.CULTURE, respCulture);\r\n      localStorage.setItem(StorageVars.UI_CULTURE, respUiCulture);\r\n      localStorage.setItem(StorageVars.ACCOUNT_ROLES, JSON.stringify(loginResponse.Roles));\r\n\r\n      if (loginResponse.AccountName) localStorage.setItem(StorageVars.ACCOUNT_NAME, loginResponse.AccountName);\r\n      if (loginResponse.SubscriptionKey) localStorage.setItem(StorageVars.SUBSCRIPTION, loginResponse.SubscriptionKey);\r\n      if (loginResponse.SubscriptionDesc) localStorage.setItem(StorageVars.SUBSCRIPTION_DESCRIPTION, loginResponse.SubscriptionDesc);\r\n    }\r\n  }\r\n\r\n  saveCulture(culture: string, uiCulture: string) {\r\n    if (this.env.auth.sessionStorage) {\r\n      sessionStorage.setItem(StorageVars.CULTURE, culture);\r\n      sessionStorage.setItem(StorageVars.UI_CULTURE, uiCulture);\r\n    } else {\r\n      localStorage.setItem(StorageVars.CULTURE, culture);\r\n      localStorage.setItem(StorageVars.UI_CULTURE, uiCulture);\r\n    }\r\n  }\r\n\r\n  getToken() {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.JWT);\r\n    else return localStorage.getItem(StorageVars.JWT);\r\n  }\r\n\r\n  getAccountName() {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.ACCOUNT_NAME);\r\n    else return localStorage.getItem(StorageVars.ACCOUNT_NAME);\r\n  }\r\n\r\n  getSubscription() {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.SUBSCRIPTION);\r\n    else return localStorage.getItem(StorageVars.SUBSCRIPTION);\r\n  }\r\n\r\n  getSubscriptionDescription() {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.SUBSCRIPTION_DESCRIPTION);\r\n    else return localStorage.getItem(StorageVars.SUBSCRIPTION_DESCRIPTION);\r\n  }\r\n\r\n  getCulture() {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.CULTURE);\r\n    else return localStorage.getItem(StorageVars.CULTURE);\r\n  }\r\n\r\n  getUICulture() {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.UI_CULTURE);\r\n    else return localStorage.getItem(StorageVars.UI_CULTURE);\r\n  }\r\n\r\n  getInstanceKey(): string | null {\r\n    if (this.env.auth.sessionStorage) return sessionStorage.getItem(StorageVars.INSTANCEKEY);\r\n    else return localStorage.getItem(StorageVars.INSTANCEKEY);\r\n  }\r\n\r\n  setInstanceKey(instanceKey: string) {\r\n    if (this.env.auth.sessionStorage) sessionStorage.setItem(StorageVars.INSTANCEKEY, instanceKey);\r\n    else localStorage.getItem(StorageVars.INSTANCEKEY);\r\n  }\r\n\r\n  getAuthServiceUrl = (): string => this.env.auth.url;\r\n  getIupUrl = (): string => this.env.auth.iupurl;\r\n  getRedirectUrl = (): string => this.env.auth.redirectUrl;\r\n  getUserGatewayUrl = (): string => this.env.auth.userGatewayUrl;\r\n  getCreateAccountUrl = (): string => this.env.auth.createAccountUrl;\r\n  getChangePasswordUrl = (): string => this.env.auth.changePasswordUrl;\r\n  hasSubscriptionSelection = (): boolean => this.env.auth.subscriptionSelection;\r\n  showSignUp = (): boolean => this.env.auth.showSignUp;\r\n  getAppId = (): string => this.env.auth.appId;\r\n  getPreLoginAppId = (): string => this.env.auth.preLoginAppId;\r\n  isSessionStorage = (): boolean => this.env.auth.sessionStorage;\r\n  getLogoURL = (): string => this.env.auth.logoURL;\r\n  isRedirectExternal = (): boolean => this.env.auth.isRedirectExternal;\r\n  getUpdateMessageIt = (): string => this.env.auth.updatemessageIt;\r\n  getUpdateMessageEn = (): string => this.env.auth.updatemessageEn;\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\r\n\r\nimport { TbAuthService } from './auth.service';\r\nimport { LoginRequest } from './models/login-request';\r\nimport { TbAuthEnvironment } from './models/auth-environment';\r\nimport { OperationResult } from './models/operation-result';\r\nimport { LoginResponse } from './models/login-response';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class TbAuthGuard implements CanActivate {\r\n    constructor(private authService: TbAuthService, private router: Router, @Inject('env') private env: TbAuthEnvironment) {}\r\n\r\n    async canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\r\n        const connection = await this.authService.checkConnection();\r\n\r\n        if (!connection) {\r\n            console.log(`CONNECTIONDOWN on: ${this.authService.getBaseUrl()}`);\r\n            // non sono loggato quindi vado alla login\r\n            if (!state.url.includes('/login')) {\r\n                this.router.navigate(['login']);\r\n            }\r\n            return true;\r\n        }\r\n\r\n        if (state.url.includes(this.authService.getLoginPageUrl())) {\r\n            this.authService.clearStorage();\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Se ricevo jwt e subKey significa che devo fare una \"autologin\"\r\n         * Creo un LoginRequest con i valori ricevuti, integro con appid letto da environment ed effettuo una login specifica\r\n         * In caso positivo vado in homepage \"/\"\r\n         */\r\n        const jwt = next.queryParams.hasOwnProperty('jwt') ? next.queryParams.jwt : null;\r\n        const subKey = next.queryParams.hasOwnProperty('subKey') ? next.queryParams.subKey : null;\r\n        const instanceKey = next.queryParams.hasOwnProperty('instanceKey') ? next.queryParams.instanceKey : null;\r\n        const ns = next.queryParams.hasOwnProperty('ns') ? next.queryParams.ns : null;\r\n        const args = next.queryParams.hasOwnProperty('args') ? next.queryParams.args : null;\r\n\r\n        //store nel local/sessions storage delle info necessarie allo snapshot\r\n        //in questo caso la libreria sta \"vivendo\" dentro mago, riceve la redirect dello user gateway e popola queste info\r\n        if (subKey && instanceKey)\r\n            this.authService.storageQueryParams(subKey, instanceKey);\r\n\r\n        if (jwt && subKey && instanceKey) {\r\n            const loginRequest: LoginRequest = new LoginRequest();\r\n            loginRequest.token = jwt;\r\n            loginRequest.subscriptionKey = subKey;\r\n            loginRequest.appId = this.authService.getAppId();\r\n\r\n            const loginResponse = (await this.authService.login(loginRequest).catch((err) => {\r\n                this.authService.errorMessage = err.error && err.error.Message;\r\n                this.router.navigate(['login']);\r\n                return;\r\n            })) as LoginResponse;\r\n\r\n            if (!loginResponse) {\r\n                this.router.navigate(['login']);\r\n                return false;\r\n            }\r\n\r\n            if (loginResponse.Result) {\r\n                this.authService.errorMessage = '';\r\n\r\n                //questa parte è da refactorizzare,  per apertura documenti da infinity urgentissima\r\n                //in futuro ci sarà l'url originale della richiesta\r\n                const url = ns ? 'document' : this.authService.getRedirectUrl();\r\n                this.router.navigate([url], {\r\n                    replaceUrl: true,\r\n                    queryParams: { jwt: null, subKey: null, ns: ns, args: args },\r\n                    queryParamsHandling: 'merge',\r\n                });\r\n\r\n                //this.router.navigate([this.authService.getRedirectUrl()]);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Se arrivo qua vuol dire che ho già un token salvato e non scaduto quindi chiedo conferma della validità\r\n         */\r\n        const authtoken = this.authService.getToken() || '';\r\n        if (authtoken) {\r\n            // ho un token, ma ne verifico la validità\r\n            const res: OperationResult = (await this.authService.isValidToken(authtoken)) as OperationResult;\r\n\r\n            if (res.Result) {\r\n                if (state.url.includes(this.authService.getLoginPageUrl())) this.router.navigate([this.authService.getRedirectUrl()]);\r\n                return true;\r\n            } else {\r\n                this.router.navigate([this.authService.getLoginPageUrl()]);\r\n                return false;\r\n            }\r\n        } else {\r\n            // non sono loggato quindi vado alla login\r\n            if (!state.url.includes(this.authService.getLoginPageUrl())) this.router.navigate([this.authService.getLoginPageUrl()]);\r\n            return true;\r\n        }\r\n    }\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\r\nimport { TbAuthEnvironment } from './models/auth-environment';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { TbAuthService } from './auth.service';\r\n\r\n@Injectable()\r\nexport class TbAuthInterceptor implements HttpInterceptor {\r\n\r\n  private env: TbAuthEnvironment;\r\n\r\n   \r\n  constructor(@Inject('env') env: TbAuthEnvironment, private authService: TbAuthService) { \r\n    this.env = env;\r\n  }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    let token = JSON.stringify({ type: 'app', appId: 'LOGINAPP', securityValue: '1l4r14m' });\r\n\r\n    /*\r\n     * Aggiungo a ogni httprequest l'header 'Authorization'\r\n     * In caso di api \"pubbliche\" come /subscriptionskeysforaccount, uso un token \"di applicazione\"\r\n     *dal 24022020 anche l'api per reperire le subscription è soggetta a jwt\r\n     */\r\n    // if (!request.url.includes('/subscriptionskeysforaccount')) {\r\n    const jwt = this.authService.getToken();\r\n    if (jwt) token = JSON.stringify({ type: 'jwt', appId: this.env.auth.appId, securityValue: jwt });\r\n    //  }\r\n\r\n    request = request.clone({\r\n      setHeaders: {\r\n        Authorization: token\r\n      }\r\n    });\r\n\r\n    /*\r\n     * Elabora la response di ogni chiamata http\r\n     */\r\n    return next.handle(request).pipe();\r\n  }\r\n}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogModule, MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'forgot-password-dialog',\r\n  templateUrl: './forgot-password.component.html',\r\n  styleUrls: ['./forgot-password.component.css']\r\n})\r\n\r\n\r\nexport class ForgotPasswordComponent implements OnInit {\r\n\r\n  public title: string;\r\n  public message: string;\r\n  public placeHolder: string;\r\n  public inputValue: string;\r\n  public buttonCancel: string;\r\n\r\n  constructor(\r\n    public mdDialogRef: MatDialogRef<ForgotPasswordComponent>,\r\n    @Inject(MAT_DIALOG_DATA) private data: any\r\n  ) {\r\n    this.title = data.Title;\r\n    this.message = data.Message;\r\n    this.placeHolder = data.PlaceHolder;\r\n    this.inputValue = data.TextValue;\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n      this.buttonCancel = 'Annulla';\r\n    } else {\r\n      this.buttonCancel = 'Cancel';\r\n    }\r\n  }\r\n\r\n  ngOnInit() { }\r\n\r\n\r\n  public cancel() {\r\n\r\n    this.data = undefined;\r\n    this.mdDialogRef.close(this.data);\r\n  }\r\n  public confirm() {\r\n    this.data.TextValue = this.inputValue;\r\n    this.mdDialogRef.close(this.data);\r\n  }\r\n}\r\n","<div class=\"app-dialog\">\r\n    <h2>{{ title }}</h2>\r\n    <label>{{ message }}</label>\r\n\r\n    <mat-form-field style=\"min-width:100%\" class=\"mt10\">\r\n        <input matInput [placeholder]=\"placeHolder\" adminAutoFocus value=\"\" [(ngModel)]=\"inputValue\" />\r\n    </mat-form-field>\r\n\r\n    <div class=\"mt20\">\r\n        <button (click)=\"cancel()\" class=\"left\" mat-raised-button>{{ buttonCancel }}</button>\r\n\r\n        <button (click)=\"confirm()\" class=\"right\" mat-raised-button color=\"primary\">OK</button>\r\n    </div>\r\n\r\n</div>","<div class=\"login-container\">\r\n    <div class=\"login\" style=\"z-index: 1\">\r\n        <div class=\"login-header\">\r\n            <div>\r\n                <img mat-card-image style=\"width: 60%\" src=\"{{ logoURL }}\" />\r\n            </div>\r\n            <div *ngIf=\"!validate\">\r\n                <h2 class=\"login-title\">{{ welcome }}</h2>\r\n                <p *ngIf=\"isExpiredSession\" class=\"login-expired-subtitle\">{{ idleTimeoutMessage }}</p>\r\n                <p class=\"login-subtitle\">{{ enterCredentials }}</p>\r\n            </div>\r\n            <div *ngIf=\"validate\">\r\n                <h2 class=\"login-chooseSubscription\">{{ chooseSubscription }}</h2>\r\n                <p class=\"login-subtitle\">{{ accountName }}: {{ loginRequest.accountName }} </p>\r\n                <!-- <h4 class=\"login-wishes\">Buon lavoro!</h4> -->\r\n            </div>\r\n        </div>\r\n        <form>\r\n            <div class=\"login-form\">\r\n                <div class=\"tb-form-control\" *ngIf=\"!validate\">\r\n                    <kendo-textbox-container floatingLabel=\"{{ accountName }}\">\r\n                        <input kendoTextBox autofocus [(ngModel)]=\"loginRequest.accountName\" (keyup)=\"keyUpFunction($event)\" name=\"accountName\" autocomplete=\"on\" />\r\n                    </kendo-textbox-container>\r\n                </div>\r\n\r\n                <div class=\"tb-form-control\" *ngIf=\"!validate\">\r\n                    <kendo-textbox-container floatingLabel=\"Password\">\r\n                        <input kendoTextBox [(ngModel)]=\"loginRequest.password\" (keyup)=\"keyUpFunction($event)\" name=\"password\" [type]=\"hide ? 'password' : 'text'\" autocomplete=\"current-password\" />\r\n                        <m4-icon *ngIf=\"hide\" (click)=\"hide = !hide\" class=\"icon iconeyefilled\" icon=\"tb-eyefilled\"></m4-icon>\r\n                        <m4-icon *ngIf=\"!hide\" (click)=\"hide = !hide\" class=\"icon iconhide\" icon=\"tb-hide\"></m4-icon>\r\n\r\n                    </kendo-textbox-container>\r\n                </div>\r\n\r\n                <div class=\"form-control\" *ngIf=\"subscriptionSelection && validate\">\r\n                    <kendo-textbox-container floatingLabel=\"{{ subscription }}\" style=\"border-bottom: 1px solid #005890\">\r\n                        <kendo-dropdownlist #dropdown [disabled]=\"loginSubscriptions?.length <= 1\" [data]=\"loginSubscriptions\" name=\"subscription\" textField=\"description\" valueField=\"subscriptionkey\" valuePrimitive=\"true\" [(ngModel)]=\"loginRequest.subscriptionKey\" style=\"position: relative;\"\r\n                            (ngModelChange)=\"onSubChange($event)\" (click)=\"isDropDownClicked()\">\r\n                        </kendo-dropdownlist>\r\n                        <m4-icon (click)=\"toggle(dropdown)\" class=\"icon\" [ngStyle]=\"{'transform': dropDownIsClicked ? 'rotate(270deg)' : 'rotate(90deg)' }\" icon=\"tb-circledrightfilled\"></m4-icon>\r\n                    </kendo-textbox-container>\r\n                    <div>\r\n                        <p class=\"instancekey\" *ngIf=\"loginSubscriptions.length > 3\"> Subscription key: {{loginRequest.subscriptionKey}} {{instancekey}}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"login-infos\">\r\n                    <div class=\"caps-lock\" *ngIf=\"capsLockOn\"><span class=\"k-icon k-i-warning\"></span> {{ blocMaiusc }}\r\n                    </div>\r\n                    <div class=\"login-error\" *ngIf=\"authService.errorMessage\">\r\n                        <span class=\"k-icon k-i-warning\"></span>{{ authService.errorMessage }}\r\n                    </div>\r\n                    <div class=\"login-info\" *ngIf=\"authService.okMessage\">\r\n                        <span class=\"k-icon k-i-warning\"></span>{{ authService.okMessage }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        <div style=\"display: flex; flex-direction: row-reverse; justify-content: space-between;padding: 0 1px;\">\r\n            <div class=\"login-footer\" style=\"display: flex; justify-content: flex-end\">\r\n                <button kendoButton class=\"login-button\" (click)=\"login()\" [disabled]=\"disabledButton()\">\r\n                    <span class=\"k-icon k-i-loading\" *ngIf=\"loading\"></span>\r\n                    <span *ngIf=\"!loading\" style=\"letter-spacing: 3px; text-transform: uppercase\">{{ buttonText\r\n                        }}</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"login-footer\">\r\n                <button kendoButton class=\"login-button\" style=\"background: grey\" (click)=\"back()\" *ngIf=\"!loading && validate\">\r\n                    <span *ngIf=\"!loading && validate\" style=\"letter-spacing: 3px\"> {{ buttonBack }}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class=\"login-footer\">\r\n            <div *ngIf=\"showSignUp\">\r\n                <p class=\"signup\" (click)=\"newUser()\">SignUp here!</p>\r\n            </div>\r\n            <!-- <div class=\"login-button-container\">\r\n                <button kendoButton class=\" login-button \" (click)=\"back()\" *ngIf=\"!loading && validate \">\r\n                    <span *ngIf=\"!loading && validate \" style=\"letter-spacing: 3px;\">\r\n                        < BACK</span>\r\n                </button>\r\n            </div> -->\r\n            <!-- <div class=\"login-button-container\">\r\n                <button kendoButton class=\" login-button \" (click)=\"login() \" [disabled]=\"disabledButton() \">\r\n                    <span class=\"k-icon k-i-loading \" *ngIf=\"loading \"></span>\r\n                    <span *ngIf=\"!loading \">{{ buttonText}}</span>\r\n                </button>\r\n            </div> -->\r\n        </div>\r\n        <div *ngIf=\"!validate\" style=\"display: flex; margin-top: 40px; justify-content: flex-end\">\r\n            <p class=\"forgotpwd\" (click)=\"goToForgotPassword()\">\r\n                <u>{{ forgetPassword }}</u>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div style=\"position: absolute; bottom: 0; width: 100%; z-index: 0\">\r\n        <p class=\"copyright copyright-abs\">Login 1.8.0.32 © 2017 - {{ currentYear }}, Zucchetti s.p.a. </p>\r\n    </div>\r\n</div>\r\n","import { TbAuthService } from '../auth.service';\r\nimport { CUCalendarJob, LoginRequest } from '../models/login-request';\r\nimport { StorageVars } from '../models/storage-vars';\r\nimport { EntityStatus, Subscription } from '../models/subscription.model';\r\nimport { ForgotPasswordComponent } from './forgot-password-dialog/forgot-password.component';\r\nimport { DateTime } from 'luxon';\r\nimport { Component, AfterContentInit, Inject, Renderer2, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { dateFieldName } from '@telerik/kendo-intl';\r\n\r\n@Component({\r\n  selector: 'tb-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\n// ---------------------------------------------------------------------------\r\nexport class TbLoginComponent implements AfterContentInit {\r\n  private cachedCompanies: Array<any> = [];\r\n\r\n  capsLockOn = false;\r\n  validate = false;\r\n  loading = false;\r\n  loginRequest: LoginRequest = new LoginRequest();\r\n  redirectUrl: string;\r\n  buttonText: string;\r\n  currentYear: string;\r\n  createAccountUrl: string;\r\n  changePasswordUrl: string;\r\n  subscriptionSelection: boolean; // abilita la scelta della subscription\r\n  showSignUp: boolean; // abilita la possibilità di registrare nuovo account\r\n  loginSubscriptions: Array<{ description: string; subscriptionkey: string; status: number; instancekey: string }> = [];\r\n  logoURL: string;\r\n  hide = true;\r\n  instancekey: string;\r\n  isConnected = true;\r\n  public document?: Document;\r\n  // testi in italiano ed inglese\r\n  chooseSubscription: string;\r\n  goodJob: string;\r\n  subscription: string;\r\n  instance: string;\r\n  buttonBack: string;\r\n  accountName: string;\r\n  welcome: string;\r\n  enterCredentials: string;\r\n  forgetPassword: string;\r\n  dontshow: string;\r\n  blocMaiusc: string;\r\n  idleTimeoutMessage: string;\r\n  upgradeWarningTitle: string;\r\n  dropDownIsClicked = false;\r\n  comboBoxIsClicked = false;\r\n  iconIsClicked = false;\r\n  @ViewChild('dropdown') dropdown: any;\r\n\r\n  // ---------------------------------------------------------------------------\r\n  constructor(\r\n    public authService: TbAuthService,\r\n    public router: Router,\r\n    private dialog: MatDialog,\r\n    private renderer: Renderer2,\r\n    @Inject(DOCUMENT) private doc?: any) {\r\n    this.renderer.listen('window', 'click', (e: Event) => {\r\n      if (this.comboBoxIsClicked) {\r\n        this.comboBoxIsClicked = false;\r\n      } else if (this.iconIsClicked) {\r\n        this.iconIsClicked = false;\r\n      } else if (this.dropdown) {\r\n        this.dropdown.toggle(false);\r\n        this.dropDownIsClicked = false;\r\n      }\r\n    });\r\n    this.document = doc as Document;\r\n    this.checkConnection();\r\n    this.loginRequest.appId = this.authService.getAppId();\r\n    this.subscriptionSelection = authService.hasSubscriptionSelection();\r\n    this.showSignUp = authService.showSignUp();\r\n    this.redirectUrl = authService.getRedirectUrl();\r\n    this.createAccountUrl = authService.getCreateAccountUrl();\r\n    this.changePasswordUrl = authService.getChangePasswordUrl();\r\n    this.logoURL = authService.getLogoURL();\r\n    this.instancekey = '';\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n      this.buttonText = this.validate || !this.subscriptionSelection ? 'Accedi' : 'Avanti';\r\n    } else {\r\n      this.buttonText = this.validate || !this.subscriptionSelection ? 'Login' : 'Next';\r\n    }\r\n    this.currentYear = new Date().getFullYear().toString();\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n      this.chooseSubscription = 'Scegli la tua sottoscrizione.';\r\n      this.goodJob = 'Buon lavoro!';\r\n      this.subscription = 'Sottoscrizione';\r\n      this.instance = 'Istanza';\r\n      this.buttonBack = '< INDIETRO';\r\n      this.accountName = 'Nome utente';\r\n      this.welcome = 'Benvenuto su MagoCloud';\r\n      this.enterCredentials = 'Inserisci nome utente e password per l\\'autenticazione.';\r\n      this.dontshow = 'Non mostrare più questo messaggio';\r\n      this.forgetPassword = 'Hai dimenticato la password';\r\n      this.blocMaiusc = 'Blocco maiuscole attivo';\r\n      this.idleTimeoutMessage = 'La tua sessione è terminata per inattività, puoi riprendere da qui.';\r\n      this.upgradeWarningTitle = 'Aggiornamento  in vista!';\r\n    } else {\r\n      this.chooseSubscription = 'Choose your subscription.';\r\n      this.goodJob = 'Good job!';\r\n      this.subscription = 'Subscription';\r\n      this.instance = 'Instance';\r\n      this.buttonBack = '< BACK';\r\n      this.accountName = 'Account name';\r\n      this.welcome = 'Welcome to MagoCloud';\r\n      this.enterCredentials = 'Enter account name and password for authentication.';\r\n      this.dontshow = 'Do not show me this message again';\r\n      this.forgetPassword = 'Did you forget your password ?';\r\n      this.blocMaiusc = 'Caps lock on';\r\n      this.idleTimeoutMessage = 'Your session has expired due to inactivity, you can resume from here.';\r\n      this.upgradeWarningTitle = 'Update planned!';\r\n    }\r\n     authService.reLoginAfterOTP.subscribe(() => { this.login(); });\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  ngAfterContentInit(): void {\r\n    this.loadLoginData();\r\n    webkitAutofillWorkaround();\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async checkConnection() {\r\n    this.isConnected = await this.authService.checkConnection();\r\n    if (!this.isConnected) {\r\n                // se mi arriva un errore mostro quello altrimenti solo l url che lo ha dato\r\n          let error = this.authService.errorMessage;\r\n          if (error.length === 0)\r\n            error = this.authService.getBaseUrl();\r\n      if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n        this.authService.errorMessage = 'Servizio temporaneamente inattivo. Dettagli: '+ error;\r\n      } else {\r\n        this.authService.errorMessage = 'Service temporarily down. Details: ' + error;\r\n      }\r\n    } else {\r\n      this.authService.errorMessage = '';\r\n      this.authService.okMessage = '';\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  onSubChange(newValue: any) {\r\n    const sd = this.loginSubscriptions.find((s) => s.subscriptionkey === newValue);\r\n    if (sd && sd.instancekey)\r\n      this.instancekey = `${this.instance}: ${sd.instancekey}`;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  keyUpFunction(event: KeyboardEvent) {\r\n    if (event.key === 'Enter') {\r\n      if (!this.disabledButton()) this.login();\r\n    }\r\n    const capsOn = event.getModifierState && event.getModifierState('CapsLock');\r\n    this.capsLockOn = capsOn;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  disabledButton() {\r\n    return (\r\n      (hasAutofill() &&\r\n        (!this.isConnected ||\r\n          (this.subscriptionSelection && this.loginSubscriptions.length === 0 && this.validate) ||\r\n          this.loading)) ||\r\n      (!hasAutofill() &&\r\n        (!this.isConnected ||\r\n          !this.loginRequest.accountName ||\r\n          !this.loginRequest.password ||\r\n          (this.subscriptionSelection && this.loginSubscriptions.length === 0 && this.validate) ||\r\n          this.loading))\r\n    );\r\n  }\r\n  get isExpiredSession(): boolean {\r\n    return sessionStorage.getItem('expiredSession') === 'true';\r\n  }\r\n  // ---------------------------------------------------------------------------\r\n  newUser() {\r\n    // rimanda alla pagina (presumibilmente dello store) dove  sarà possibile creare un nuovo account.\r\n    this.router.navigate([this.createAccountUrl]);\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async back() {\r\n    // ripulisco tutto...\r\n    this.validate = false;\r\n    this.loginRequest.token = '';\r\n    this.loginRequest.password = '';\r\n    this.loginRequest.subscriptionKey = '';\r\n    this.loginRequest.appId = '';\r\n    this.buttonText = 'Next';\r\n    this.loginSubscriptions = [];\r\n    this.authService.okMessage = '';\r\n    this.authService.errorMessage = '';\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async login() {\r\n    this.authService.okMessage = '';\r\n    this.authService.errorMessage = '';\r\n    this.saveLoginData();\r\n    this.loading = true;\r\n\r\n    sessionStorage.removeItem('expiredSession');\r\n\r\n    if (!this.validate && this.subscriptionSelection) {\r\n      // introduco un prelognappid di default e uno letto dell environment\r\n      // in modo che si possano fare azioni differenti, per esempio 2factauth\r\n      this.loginRequest.appId = this.authService.getPreLoginAppId();\r\n      if (!this.loginRequest.appId)\r\n      this.loginRequest.appId = 'MCloudPreLogin'; // Default\r\n      //\r\n      this.loginRequest.subscriptionKey = '';\r\n      const result1 = await this.authService.prelogin(this.loginRequest).catch((err1) => {\r\n        this.loading = false;\r\n        this.authService.errorMessage = err1.error && err1.error.Message;\r\n        return;\r\n      });\r\n      this.loading = false;\r\n      this.buttonText = this.validate ? 'Login' : 'Next';\r\n      // todo controlla come vengono mostrati errori sia login sia checkdb\r\n      if (result1 && result1.Result) {\r\n        this.validate = true;\r\n        this.buttonText = this.validate ? 'Login' : 'Next';\r\n        this.getCompaniesForUser(this.loginRequest.accountName);\r\n        this.authService.errorMessage = '';\r\n        this.authService.okMessage = '';\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    } else {\r\n      this.loginRequest.appId = this.authService.getAppId();\r\n      const result = await this.authService.login(this.loginRequest).catch((err) => {\r\n        this.loading = false;\r\n        this.authService.errorMessage = err.error && err.error.Message;\r\n        return;\r\n      });\r\n\r\n      this.loading = false;\r\n      this.buttonText = this.validate ? 'Login' : 'Next';\r\n      // todo controlla come vengono mostrati errori sia login sia checkdb\r\n      if (result && result.Result) {\r\n        const sd = this.loginSubscriptions.find((s) => s.subscriptionkey === this.loginRequest.subscriptionKey);\r\n\r\n        if (sd && sd.status) {\r\n\r\n          // tslint:disable-next-line:no-bitwise\r\n          const scheduled = (sd.status & EntityStatus.UpdateScheduled) === EntityStatus.UpdateScheduled;\r\n          if (scheduled) {\r\n            // se la sub non ha lo stato impostato  non cerco nemmeno risparmiandomi una chiamata\r\n            const result1 = await this.authService.getCalendar(this.loginRequest.subscriptionKey);\r\n            if (result1.result && result1.content) {\r\n\r\n              const scheduledUpdate: CUCalendarJob = result1.content as CUCalendarJob;\r\n              if (scheduledUpdate) {\r\n                console.log('scheduledUpdate: ' + scheduledUpdate.scheduledtime.toString());\r\n                const val = localStorage.getItem('DONTSHOWUPDATEWARN');\r\n                let message = this.authService.getUpdateMessage();\r\n\r\n                message = message.replace('@@sub', this.authService.getSubscriptionDescription()!);\r\n                message = message.replace('@@date', this.FormatDateString(scheduledUpdate.scheduledtime));\r\n                message = message.replace('@@starth', this.FormatStartDateString(scheduledUpdate.scheduledtime));\r\n                message = message.replace('@@endh', this.FormatEndDateString(scheduledUpdate.scheduledtime));\r\n\r\n                // tslint:disable-next-line:max-line-length\r\n                const diffInDays = DateTime.fromISO(scheduledUpdate.scheduledtime.toString()).diff(DateTime.fromISO(DateTime.local().toString()), 'days').toObject().days;\r\n                // non mostro se mi torna una data precedente ad oggi.\r\n                if (val !== message && (DateTime.local() < DateTime.fromISO(scheduledUpdate.scheduledtime.toString()))\r\n                  // mostro solo se previsti entro 15 giorni per decisione mia di me medesima ilaria\r\n                  && diffInDays && diffInDays < 15) {\r\n                  this.authService.openUpdateAlertDialog(\r\n                    message,\r\n                    this.upgradeWarningTitle,\r\n                    this.dontshow,\r\n                    this.loginRequest.accountName,\r\n                    this.loginRequest.subscriptionKey);\r\n                  return;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.authService.okMessage = '';\r\n        this.authService.errorMessage = '';\r\n\r\n        if (this.authService.isRedirectExternal()) {\r\n          console.log('go external');\r\n          this.authService.getRedirectUrlForSubscription(this.loginRequest.accountName, this.loginRequest.subscriptionKey);\r\n          return;\r\n        }\r\n\r\n        console.log('go internal');\r\n        this.router.navigate([this.authService.getRedirectUrl()]);\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  convertUTCDateToLocalDate(date: Date) {\r\n    // devo fare questo rigiro perchè l ora che mi arriva  è intesa come utc e devo mostrarla come locale\r\n    const dt = new Date(date);\r\n    return new Date(Date.UTC(dt.getFullYear(),\r\n      dt.getMonth(),\r\n      dt.getDate(),\r\n      dt.getHours(),\r\n      dt.getMinutes(),\r\n      dt.getSeconds(),\r\n      dt.getMilliseconds()));\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  FormatDateString = (date: Date): string => {\r\n    const tempDate = this.convertUTCDateToLocalDate(date);\r\n    return `${tempDate.getDate()}-${tempDate.getMonth() + 1}-${tempDate.getFullYear()}`;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  FormatStartDateString = (date: Date): string => {\r\n    const tempDate = this.convertUTCDateToLocalDate(date);\r\n    // imposto l ora senza minuti, arrotonadando per sicurezza.\r\n    return `${this.NumberPad(tempDate.getHours(), 2)}:00`;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  FormatEndDateString = (date: Date): string => {\r\n    const tempDate = this.convertUTCDateToLocalDate(date);\r\n    let h = tempDate.getHours();\r\n    h += 2; // cablato due ore perche non abbiamo ancora stime sensate e cerchiamo di stare aderenti alla mail inviata\r\n    return `${this.NumberPad(h, 2)}:00`;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  NumberPad = (value: number, padding: number) => {\r\n    const zeroes = new Array(padding + 1).join('0');\r\n    return (zeroes + value).slice(-padding);\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  loadLoginData() {\r\n    this.loginRequest.accountName = this.authService.getAccountName() || '';\r\n    this.loginRequest.subscriptionKey = this.authService.getSubscription() || '';\r\n\r\n    if (!this.loginRequest.accountName) {\r\n      this.loginRequest.subscriptionKey = '';\r\n    } else {\r\n      this.getCompaniesForUser(this.loginRequest.accountName);\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  private saveLoginData() {\r\n    if (this.authService.isSessionStorage()) {\r\n      sessionStorage.setItem(StorageVars.ACCOUNT_NAME, this.loginRequest.accountName);\r\n      sessionStorage.setItem(StorageVars.SUBSCRIPTION, this.loginRequest.subscriptionKey);\r\n    } else {\r\n      localStorage.setItem(StorageVars.ACCOUNT_NAME, this.loginRequest.accountName);\r\n      localStorage.setItem(StorageVars.SUBSCRIPTION, this.loginRequest.subscriptionKey);\r\n    }\r\n\r\n    if (this.loginSubscriptions.length > 0) {\r\n      const sd = this.loginSubscriptions.find((s) => s.subscriptionkey === this.loginRequest.subscriptionKey);\r\n      if (sd) {\r\n        if (this.authService.isSessionStorage()) {\r\n          sessionStorage.setItem(StorageVars.SUBSCRIPTION_DESCRIPTION, sd.description);\r\n        } else {\r\n          localStorage.setItem(StorageVars.SUBSCRIPTION_DESCRIPTION, sd.description);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async getCompaniesForUser(user: string) {\r\n    if (!this.isConnected) {\r\n      return;\r\n    }\r\n\r\n    if (!user || !this.subscriptionSelection) {\r\n      this.loginRequest.subscriptionKey = '';\r\n      return;\r\n    }\r\n\r\n    this.loginSubscriptions = [];\r\n    // this.loginRequest.subscriptionKey = '';\r\n    this.authService.errorMessage = '';\r\n    this.authService.okMessage = '';\r\n    const temp = await this.requestAndSortSubscriptions(user);\r\n    // Premio Eleganza Codice 2019 (@LucaBruni)\r\n    if (JSON.stringify(temp) !== JSON.stringify(this.loginSubscriptions)) this.loginSubscriptions = temp;\r\n\r\n    if (this.loginSubscriptions.length === 0) {\r\n      this.loginRequest.subscriptionKey = '';\r\n      localStorage.removeItem(StorageVars.SUBSCRIPTION);\r\n      localStorage.removeItem(StorageVars.SUBSCRIPTION_DESCRIPTION);\r\n      this.authService.errorMessage = 'No Subscriptions associated to this user';\r\n    }\r\n\r\n    if (this.loginSubscriptions.length > 0) {\r\n      if (!this.loginRequest.subscriptionKey) {\r\n        this.loginRequest.subscriptionKey = this.loginSubscriptions[0].subscriptionkey;\r\n      } else {\r\n        if (this.loginSubscriptions.map((s) => s.subscriptionkey).indexOf(this.loginRequest.subscriptionKey) === -1) {\r\n          this.loginRequest.subscriptionKey = this.loginSubscriptions[0].subscriptionkey;\r\n        }\r\n      }\r\n      this.onSubChange(this.loginRequest.subscriptionKey);\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  private async requestAndSortSubscriptions(user: string): Promise<Array<Subscription>> {\r\n    if (this.cachedCompanies.hasOwnProperty(user) && this.cachedCompanies[user as any]) {\r\n      return this.cachedCompanies[user as any];\r\n    }\r\n\r\n    const temp: Array<Subscription> = [];\r\n    const result: Array<Subscription> = await this.authService.getCompaniesForUser(user).toPromise();\r\n    result.sort(this.compareCompanies).forEach((c) => {\r\n      temp.push({ subscriptionkey: c.subscriptionkey, description: c.description, status: c.status, instancekey: c.instancekey });\r\n    });\r\n\r\n    if (temp.length > 0) this.cachedCompanies[user as any] = temp;\r\n\r\n    return temp;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  private compareCompanies(a: Subscription, b: Subscription) {\r\n    const nameA = a.description.toLowerCase();\r\n    const nameB = b.description.toLowerCase();\r\n    if (nameA < nameB)\r\n      return -1;\r\n    if (nameA > nameB)\r\n      return 1;\r\n    return 0;\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  goToForgotPassword() {\r\n    if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n      this.forgotpassword('Hai dimenticato la password ?', 'Inserisci il tuo nome utente: ', 'Nome utente');\r\n    } else {\r\n      this.forgotpassword('Forgot Password ?', 'Please write your account name: ', 'Account name');\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  async forgotpassword(Title: string, Message: string, PlaceHolder: string) {\r\n    this.authService.errorMessage = '';\r\n    this.authService.okMessage = '';\r\n\r\n    const dialogRef = this.dialog.open(ForgotPasswordComponent, {\r\n      data: {\r\n        Title,\r\n        Message,\r\n        PlaceHolder,\r\n        TextValue: this.loginRequest.accountName,\r\n      },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(async (data: { TextValue: string | undefined }) => {\r\n      this.authService.errorMessage = '';\r\n      if (data === undefined) return;\r\n      if (data.TextValue === undefined || data.TextValue === '') {\r\n        if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n          this.authService.errorMessage = 'Inserisci un nome utente valido';\r\n          return;\r\n        } else {\r\n          this.authService.errorMessage = 'Write a valid account name';\r\n          return;\r\n        }\r\n      }\r\n\r\n      const accname: string = data.TextValue;\r\n      const result = await this.authService.resetpassword(accname).catch((err) => {\r\n        this.authService.errorMessage = err.error && err.error.Message;\r\n        return;\r\n      });\r\n\r\n      // todo controlla come vengono mostrati errori\r\n      if (result && result.Result) {\r\n        this.authService.errorMessage = '';\r\n        if (navigator.language === 'it' || navigator.language === 'it-IT' || navigator.language === 'it-CH') {\r\n          this.authService.okMessage = 'Controlla la tua e-mail e segui le istruzioni per reimpostare la password.';\r\n        } else {\r\n          this.authService.okMessage = 'Check your email and follow the instructions to reset your password.';\r\n        }\r\n        this.router.navigate([this.authService.getRedirectUrl()]);\r\n      }\r\n      if (result && !result.Result) {\r\n        this.authService.errorMessage = result.Message + ' (Code: ' + result.Code + ').';\r\n        this.authService.okMessage = '';\r\n      }\r\n    });\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  isDropDownClicked() {\r\n    this.dropDownIsClicked = !this.dropDownIsClicked;\r\n    this.comboBoxIsClicked = this.dropDownIsClicked;\r\n    if (this.dropDownIsClicked && this.comboBoxIsClicked) {\r\n      this.iconIsClicked = false;\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  toggle(dropdown: any) {\r\n    this.dropDownIsClicked = !this.dropDownIsClicked;\r\n    this.iconIsClicked = this.dropDownIsClicked;\r\n    this.dropdown = dropdown;\r\n    if (this.dropDownIsClicked) {\r\n      dropdown.toggle(true);\r\n    } else {\r\n      dropdown.toggle(false);\r\n    }\r\n  }\r\n}\r\n\r\n// workaround for chromium bug https://bugs.chromium.org/p/chromium/issues/detail?id=352527\r\nfunction webkitAutofillWorkaround() {\r\n  setTimeout(() => {\r\n    try {\r\n      document.querySelectorAll('input:-webkit-autofill').forEach((el: any) => (el.parentElement.className = 'k-textbox-container'));\r\n    } catch {\r\n      // no webkit browser\r\n    }\r\n  }, 1000);\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\nfunction hasAutofill() {\r\n  try {\r\n    return !!document.querySelector('input:-webkit-autofill');\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { TbAuthService } from './auth.service';\r\n\r\n@Component({\r\n    selector: 'tb-logoff',\r\n    template: '',\r\n})\r\nexport class TbLogoffComponent {\r\n    constructor(public authService: TbAuthService, public router: Router) {\r\n        this.LogOff();\r\n    }\r\n\r\n    async LogOff() {\r\n        console.log('entering LogOff..');\r\n        const logoff = await this.authService.logoff();\r\n\r\n        if (logoff.Result) {\r\n            // if usergateway url exists, then redirect to it\r\n            this.authService.navigateUserGateway();\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\n@NgModule({\r\n  imports: [\r\n    MatDialogModule,\r\n    MatFormFieldModule, MatInputModule, MatFormFieldModule,\r\n    // MatDividerModule,\r\n    // MatAutocompleteModule,\r\n    // MatButtonModule,\r\n    // MatButtonToggleModule,\r\n    // MatCardModule,\r\n   MatCheckboxModule,\r\n    // MatChipsModule,\r\n    // MatDatepickerModule,\r\n    // MatExpansionModule,\r\n    // MatGridListModule,\r\n    // MatIconModule,\r\n    // MatInputModule,\r\n    // MatListModule,\r\n    // MatMenuModule,\r\n    // MatNativeDateModule,\r\n    // MatPaginatorModule,\r\n    // MatProgressBarModule,\r\n    // MatProgressSpinnerModule,\r\n    // MatRadioModule,\r\n    // MatRippleModule,\r\n    // MatSelectModule,\r\n    // MatSidenavModule,\r\n    // MatSliderModule,\r\n    // MatSlideToggleModule,\r\n    // MatSnackBarModule,\r\n    // MatSortModule,\r\n    // MatStepperModule,\r\n    // MatTableModule,\r\n    // MatTabsModule,\r\n    // MatToolbarModule,\r\n    // MatBadgeModule,\r\n    // MatTooltipModule\r\n  ],\r\n  exports: [\r\n    MatDialogModule,\r\n    MatFormFieldModule,\r\n    // MatDividerModule,\r\n    // MatAutocompleteModule,\r\n    // MatButtonModule,\r\n    // MatButtonToggleModule,\r\n    // MatCardModule,\r\n    MatCheckboxModule,\r\n    // MatChipsModule,\r\n    // MatStepperModule,\r\n    // MatDatepickerModule,\r\n    // MatExpansionModule,\r\n    // MatGridListModule,\r\n    // MatIconModule,\r\n    // MatInputModule,\r\n    // MatListModule,\r\n    // MatMenuModule,\r\n    // MatNativeDateModule,\r\n    // MatPaginatorModule,\r\n    // MatProgressBarModule,\r\n    // MatProgressSpinnerModule,\r\n    // MatRadioModule,\r\n    // MatRippleModule,\r\n    // MatSelectModule,\r\n    // MatSidenavModule,\r\n    // MatSliderModule,\r\n    // MatSlideToggleModule,\r\n    // MatSnackBarModule,\r\n    // MatSortModule,\r\n    // MatTableModule,\r\n    // MatTabsModule,\r\n    // MatToolbarModule,\r\n    // MatTooltipModule,\r\n    // MatBadgeModule,\r\n  ],\r\n  declarations: []\r\n})\r\nexport class AppMaterialModule { }\r\n","\r\n\r\n\r\nimport { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { InputsModule } from '@progress/kendo-angular-inputs';\r\nimport { ButtonsModule } from '@progress/kendo-angular-buttons';\r\nimport { DropDownsModule } from '@progress/kendo-angular-dropdowns';\r\n\r\nimport { TbLoginComponent } from './pages/login.component';\r\nimport { TbLogoffComponent } from './logoff.component';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { TbAuthService } from './auth.service';\r\n\r\nimport { TbAuthGuard } from './auth.guard';\r\nimport { ForgotPasswordComponent } from './pages/forgot-password-dialog/forgot-password.component';\r\nimport { ChangePasswordDialogComponent } from './pages/change-password-dialog/change-password-dialog.component';\r\nimport { AlertDialogComponent } from './pages/alert-dialog/alert-dialog.component';\r\nimport { OtpComponent } from './pages/otp-dialog/otp.component';\r\nimport { AppMaterialModule } from './app-material.module';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { TbIconsModule } from '@tb/icons';\r\n\r\nconst routes: Routes = [{ path: 'logoff', component: TbLogoffComponent, canActivate: [TbAuthGuard], pathMatch: 'full' }];\r\n\r\n@NgModule({\r\n  declarations: [TbLoginComponent, TbLogoffComponent, ForgotPasswordComponent,\r\n    ChangePasswordDialogComponent, AlertDialogComponent, OtpComponent],\r\n  entryComponents: [ForgotPasswordComponent, ChangePasswordDialogComponent, AlertDialogComponent, OtpComponent],\r\n  imports: [CommonModule, FormsModule, InputsModule, ButtonsModule, DropDownsModule,\r\n    RouterModule.forRoot(routes), AppMaterialModule, MatDialogModule, MatInputModule, MatFormFieldModule, TbIconsModule],\r\n  exports: [TbLoginComponent, TbLogoffComponent, RouterModule, AppMaterialModule]\r\n\r\n})\r\nexport class TbAuthModule {\r\n  static forRoot(): ModuleWithProviders<TbAuthModule>  {\r\n    return {\r\n      ngModule: TbAuthModule,\r\n      providers: [\r\n        TbAuthService\r\n      ]\r\n    };\r\n  }\r\n}\r\n"]}